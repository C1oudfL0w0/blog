
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <title>PHP特性 | 雲流のLowest World</title>
    <meta name="author" content="C1oudfL0w0" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <link rel="icon" href="/blog/images/croppedImage_cropped.jpg" />
    <!-- cdn挂掉的时候要可以引用本地 -->
<!-- <script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.min.js"></script> -->
<script src="/blog/js/vue.global.prod.min.js"></script>


<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.2.1/css/all.min.css" />


<link rel="stylesheet" href="/blog/css/all.min.css" />
<link rel="stylesheet" href="/blog/css/fonts.min.css" />
<link rel="stylesheet" href="/blog/css/search.css" />
<script> const mixins = {}; </script>

<!-- 引入jQuery-->
<!-- <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script src="/blog/js/jquery.min.js"></script>

<!--改成了prismjs高亮-->

<script src="/blog/js/lib/prism.js"></script>
<link rel="stylesheet" href="/blog/css/prism.css" rel="stylesheet" />



<script src="/blog/js/lib/preview.js"></script>










<script src="/blog/js/lib/home.js"></script>

<link rel="stylesheet" href="/blog/css/main.css" />
<!-- 引入不蒜子-->

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script type="text/javascript" src="/blog/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/blog/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<!-- 引入clipboard -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>

<script type="text/javascript" src="/blog/libs/codeBlock/codeCopy.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/blog/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/blog/atom.xml" title="雲流のLowest World" type="application/atom+xml">
</head>

<body>
    <!--flag{never_g0nna g1ve_you up}-->

    <!-- 页面点击特效 -->
    <script type="text/javascript" src="/blog/js/love-click.js"></script>

    <!-- 浏览器标题 -->
    <script async type="text/javascript" src="/blog/js/FunnyTitle.js"></script>

    <!-- 动态背景 -->
    

    <!--文章目录-->
    
    <div id="toc" class="toc-article">
    <h3><i class="fas fa-stream"></i>  目录</h3>
      <div class="toc-title"></div>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP%E7%89%B9%E6%80%A7"><span class="toc-number">1.</span> <span class="toc-text">PHP特性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP%E5%BC%B1%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">PHP弱类型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP%E7%9F%AD%E6%A0%87%E7%AD%BE"><span class="toc-number">3.</span> <span class="toc-text">PHP短标签</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%89%B9%E6%80%A7"><span class="toc-number">4.</span> <span class="toc-text">函数特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#intval"><span class="toc-number">4.1.</span> <span class="toc-text">intval()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#in-array-%E5%87%BD%E6%95%B0"><span class="toc-number">4.2.</span> <span class="toc-text">in_array()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#is-file-%E5%87%BD%E6%95%B0"><span class="toc-number">4.3.</span> <span class="toc-text">is_file()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#is-numeric-%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.</span> <span class="toc-text">is_numeric()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mt-srand%E5%87%BD%E6%95%B0-amp-%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%BC%8F%E6%B4%9E"><span class="toc-number">4.5.</span> <span class="toc-text">mt_srand函数&amp;伪随机数漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SERVER-%E2%80%98argv%E2%80%99"><span class="toc-number">4.6.</span> <span class="toc-text">$_SERVER[‘argv’]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SERVER-%E2%80%98QUERY-STRING%E2%80%99"><span class="toc-number">4.7.</span> <span class="toc-text">$_SERVER[‘QUERY_STRING’]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gettext-%E5%87%BD%E6%95%B0"><span class="toc-number">4.8.</span> <span class="toc-text">gettext()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#get-defined-vars-%E5%87%BD%E6%95%B0"><span class="toc-number">4.9.</span> <span class="toc-text">get_defined_vars()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class-exists-%E5%87%BD%E6%95%B0"><span class="toc-number">4.10.</span> <span class="toc-text">class_exists()函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#autoload-%E5%87%BD%E6%95%B0"><span class="toc-number">4.10.1.</span> <span class="toc-text">__autoload()函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pathinfo%E5%87%BD%E6%95%B0"><span class="toc-number">4.11.</span> <span class="toc-text">pathinfo函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#md5"><span class="toc-number">5.1.</span> <span class="toc-text">md5</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E6%95%88%E5%80%BC%E7%BB%95%E8%BF%87"><span class="toc-number">5.1.1.</span> <span class="toc-text">等效值绕过</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#md4"><span class="toc-number">5.2.</span> <span class="toc-text">md4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sha1"><span class="toc-number">5.3.</span> <span class="toc-text">sha1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#substr"><span class="toc-number">5.4.</span> <span class="toc-text">substr</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%A4%8D%E5%8F%96%E5%80%BC%E7%AA%81%E7%A0%B4substr%E9%99%90%E5%88%B6"><span class="toc-number">5.4.1.</span> <span class="toc-text">重复取值突破substr限制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strpos"><span class="toc-number">5.5.</span> <span class="toc-text">strpos</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#trim"><span class="toc-number">5.6.</span> <span class="toc-text">trim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#htmlspecialchars"><span class="toc-number">5.7.</span> <span class="toc-text">htmlspecialchars</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%89%B9%E6%80%A7"><span class="toc-number">6.</span> <span class="toc-text">正则特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#preg-match"><span class="toc-number">6.1.</span> <span class="toc-text">preg_match()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E7%BB%95%E8%BF%87"><span class="toc-number">6.2.</span> <span class="toc-text">常规绕过</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E8%A7%86%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">6.3.</span> <span class="toc-text">无视通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BA%A2%E5%87%BA%E7%BB%95%E8%BF%87-x2F-PCRE%E5%9B%9E%E6%BA%AF"><span class="toc-number">6.4.</span> <span class="toc-text">溢出绕过&#x2F;PCRE回溯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0a%E6%8D%A2%E8%A1%8C%E7%BB%95%E8%BF%87"><span class="toc-number">6.5.</span> <span class="toc-text">%0a换行绕过</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E7%BB%95%E8%BF%87"><span class="toc-number">6.6.</span> <span class="toc-text">命名空间绕过</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%BB%95%E8%BF%87"><span class="toc-number">6.7.</span> <span class="toc-text">数组绕过</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ereg-%E5%87%BD%E6%95%B0"><span class="toc-number">6.8.</span> <span class="toc-text">ereg()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#preg-replace%E5%92%8C%E6%AD%A3%E5%88%99e%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.9.</span> <span class="toc-text">preg_replace和正则e模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E7%BB%95%E8%BF%87"><span class="toc-number">7.</span> <span class="toc-text">路径绕过</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%92%8C%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%80%E8%B5%B7%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">8.</span> <span class="toc-text">数字和运算符一起执行命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">9.</span> <span class="toc-text">运算符优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#and%E4%B8%8E-x3D"><span class="toc-number">9.1.</span> <span class="toc-text">and与&#x3D;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#amp-amp-%E4%B8%8E"><span class="toc-number">9.2.</span> <span class="toc-text">&amp;&amp;与||</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%B1%BB"><span class="toc-number">10.</span> <span class="toc-text">内置类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#php%E5%8E%9F%E7%94%9F%E7%B1%BB"><span class="toc-number">10.1.</span> <span class="toc-text">php原生类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E7%B1%BBReflectionClass"><span class="toc-number">10.1.1.</span> <span class="toc-text">反射类ReflectionClass</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-number">11.</span> <span class="toc-text">编码绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-number">11.1.</span> <span class="toc-text">十六进制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#url%E7%BC%96%E7%A0%81"><span class="toc-number">11.2.</span> <span class="toc-text">url编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81"><span class="toc-number">11.3.</span> <span class="toc-text">字符编码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%BB%95%E8%BF%87-1"><span class="toc-number">12.</span> <span class="toc-text">数组绕过</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96"><span class="toc-number">13.</span> <span class="toc-text">变量覆盖</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">13.1.</span> <span class="toc-text">$$</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#extract-%E5%87%BD%E6%95%B0"><span class="toc-number">13.2.</span> <span class="toc-text">extract()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#parse-str-%E5%87%BD%E6%95%B0"><span class="toc-number">13.3.</span> <span class="toc-text">parse_str()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach-%E5%87%BD%E6%95%B0"><span class="toc-number">13.4.</span> <span class="toc-text">foreach()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#array-merge-%E5%87%BD%E6%95%B0"><span class="toc-number">13.5.</span> <span class="toc-text">array_merge()函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GET%EF%BC%8C-POST%EF%BC%8C-COOKIE"><span class="toc-number">14.</span> <span class="toc-text">$_GET，$_POST，$_COOKIE</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#REQUEST"><span class="toc-number">15.</span> <span class="toc-text">$_REQUEST</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%9E%E6%B3%95%E4%BC%A0%E5%8F%82"><span class="toc-number">16.</span> <span class="toc-text">非法传参</span></a></li></ol>
    </div>
  

    <!--返回顶部-->
    <div id="totop" style="position:fixed;bottom:50px;right:60px;font-size: 48px;cursor: pointer;z-index: 10;">
        <a title="返回顶部">↑</a>
    </div>
    <script src="/blog/js/totop.js"></script>

    <div id="layout">
        
            <div id="content-background" ref="contentBackground" data-images="https://pic.imgdb.cn/item/65d61d809f345e8d03b8bc7a.png"></div>
            
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>第一次加载文章图片可能会花费较长时间</p>
                    <p>要不挂个梯子试试？（x</p>
                    <p>加载过慢请开启缓存&ensp;浏览器默认开启</p>
                    <img src="/blog/images/loading.gif" />
                </div>
            </div>
        </transition>
        <transition name="into">
            <div id="main" v-show="!loading">
                <nav id="menu" ref="menu">
    <div class="desktop-menu">
        <a class="title" href="/blog/">
            <span>雲流のLOWEST WORLD</span>
        </a>
        
        <a href="/blog/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/blog/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/blog/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/blog/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/blog/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
        <a href="/blog/links">
            <i class="fa-solid fa-link fa-fw"></i>
            <span>&ensp;Links</span>
        </a>
        
        <a href="/blog/search">
            <i class="fa-solid fa-search fa-fw"></i>
            <span>&ensp;Search</span>
        </a>
        
    </div>
    <div id="mobile-menu">
        <div class="curtain" v-show="showMenu" @click="showMenu = !showMenu"></div>
        <div class="title" @click="showMenu = !showMenu">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;雲流のLOWEST WORLD</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="showMenu">
            
            <a href="/blog/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                </div>
            </a>
            
            <a href="/blog/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                </div>
            </a>
            
            <a href="/blog/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                </div>
            </a>
            
            <a href="/blog/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                </div>
            </a>
            
            <a href="/blog/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                </div>
            </a>
            
            <a href="/blog/links">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-link fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Links</div>
                </div>
            </a>
            
            <a href="/blog/search">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-search fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Search</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>

                <div class="article">
    <div>
        <h1>PHP特性</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/15
        </span>
        
        <span class="category">
            <a href="/blog/categories/Web/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Web
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            <span class="tag">
                
                <a href="/blog/tags/PHP/" style="color: #ff7d73">PHP</a>
            </span>
            
        </span>
        
        <!--文章字数统计-->
        
            
<div style="margin-top:10px;">
    <span class="post-time">
      <span class="post-meta-item-icon">
        <i class="fa fa-keyboard-o"></i>
        <span class="post-meta-item-text">  字数统计: </span>
        <!-- 安装插件npm install hexo-wordcount --save -->
        <span class="post-count">5.9k字</span>
      </span>
    </span>

    <span class="post-time">
      &nbsp; | &nbsp;
      <span class="post-meta-item-icon">
        <i class="fa fa-hourglass-half"></i>
        <span class="post-meta-item-text">  阅读时长: </span>
        <span class="post-count">25分</span>
      </span>
    </span>
    
    <!--不蒜子统计访问数-->
    <span id="busuanzi_container_page_pv">
    &nbsp; | &nbsp;
    总文章阅读量：<span id="busuanzi_value_page_pv"></span>次
    </span>
</div>

          
    </div>
    
    <div class="content" v-pre>
        <h1 id="PHP特性"><a href="#PHP特性" class="headerlink" title="PHP特性"></a>PHP特性</h1><p>总结 PHP 中常见的一些函数&#x2F;语言特性</p>
<span id="more"></span>

<h1 id="PHP弱类型"><a href="#PHP弱类型" class="headerlink" title="PHP弱类型"></a>PHP弱类型</h1><blockquote>
<p>在 PHP 中，不同类型的变量可以相互转换</p>
</blockquote>
<p>比较</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"admin"</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"1admin"</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"admin1"</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"admin1"</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"0e123456"</span><span class="token operator">==</span><span class="token string double-quoted-string">"0e4456789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token constant boolean">True</span><span class="token operator">==</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token constant boolean">True</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token constant boolean">False</span><span class="token operator">==</span><span class="token string double-quoted-string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token constant boolean">False</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>运算</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token string double-quoted-string">"10.5"</span><span class="token punctuation">;</span> 	<span class="token comment">// $test=11.5(float)</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token string double-quoted-string">"-1.3e3"</span><span class="token punctuation">;</span> 	<span class="token comment">// $test=-1299(float)</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token string double-quoted-string">"bob-1.3e3"</span><span class="token punctuation">;</span>	<span class="token comment">// $test=1(int)</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token string double-quoted-string">"2admin"</span><span class="token punctuation">;</span>	<span class="token comment">// $test=3(int)</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token string double-quoted-string">"admin2"</span><span class="token punctuation">;</span>	<span class="token comment">// $test=1(int)</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这种题可以在本地多调试调试来找到需要的payload</p>
<p>例如将字符串转换为数字或将数字转换为字符串</p>
<ul>
<li><p>科学计数法绕过</p>
<blockquote>
<p> 使用例</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$year</span><span class="token operator">==</span><span class="token number">2022</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$year</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">!==</span><span class="token number">2023</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span> 
此时传入<span class="token number">202.2e1</span>即可绕过<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>与数字或布尔值比较时，字符串会转为数字或布尔值</p>
<blockquote>
<p>ctfshow web140</p>
</blockquote>
<p>例：字符串’&lt;’会被转换为0，因为不是一个有效的数字</p>
</li>
</ul>
<hr>
<h1 id="PHP短标签"><a href="#PHP短标签" class="headerlink" title="PHP短标签"></a>PHP短标签</h1><p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.basic-syntax.phptags.php">https://www.php.net/manual/zh/language.basic-syntax.phptags.php</a></p>
<blockquote>
<p>PHP 有一个 echo 标记简写 <code>&lt;?=</code>，    它是更完整的 <code>&lt;?php echo</code> 的简写形式</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?</span> <span class="token keyword">echo</span> <span class="token string single-quoted-string">'123'</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span>  #前提是开启配置参数short_open_tags=on
<span class="token php language-php"><span class="token delimiter important">&lt;?=</span><span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token delimiter important">?></span></span>  等价于 <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token delimiter important">?></span></span>  #不需要开启参数设置
&lt;% echo '123';%>   #开启配置参数asp_tags=on，并且只能在7.0以下版本使用
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>php<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">echo <span class="token string">'123'</span><span class="token punctuation">;</span> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> #不需要修改参数开关，但是只能在7.0以下可用。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>可绕过过滤&lt;?或php</li>
</ul>
<hr>
<h1 id="函数特性"><a href="#函数特性" class="headerlink" title="函数特性"></a>函数特性</h1><h2 id="intval"><a href="#intval" class="headerlink" title="intval()"></a>intval()</h2><blockquote>
<p>将给定变量转换成整型变量，获取变量的整数值</p>
</blockquote>
  <pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword type-declaration">int</span> <span class="token function">intval</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> <span class="token punctuation">,</span> base <span class="token punctuation">)</span>
<span class="token comment">////var指要转换成 integer 的数量值,base指转化所使用的进制 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li><p><code>var</code> 可以是任何标量类型，变量不能是array和object格式</p>
<p>除非<code>var</code>参数是字符串，否则 <strong>intval()</strong> 的 <code>base </code>参数不会有效果</p>
<p><code>var</code>中存在字母的话遇到字母就停止读取</p>
<p>但是<strong>e</strong>这个字母比较特殊，可以在PHP中不是科学计数法</p>
</li>
<li><p>如果 <code>base </code>是 <strong>0</strong>，通过检测 <code>var </code>的格式来决定使用的进制： </p>
<ul>
<li>如果字符串包括了 “0x” (或 “0X”) 的前缀，使用 16 进制 (hex)；</li>
<li>否则，如果字符串以 “0” 开始，使用 8 进制(octal)；</li>
<li>否则，如果字符串以”0b”开始，使用2进制；</li>
<li>否则，将使用 10 进制 (decimal)。</li>
</ul>
</li>
<li><p><strong>漏洞</strong>：通过使用<strong>指定的进制</strong> <code>base</code> 转换（默认是十进制），返回变量 <code>var</code> 的 integer 数值。 intval() 不能用于 object，否则会产生 E_NOTICE 错误并返回 1。</p>
<p>处理开头是数字的字符串时，返回值为开头的数</p>
</li>
<li><p>防止整数溢出：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'4200000000000000000000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>回显：32位系统：2147483647；64位系统：9223372036854775807</p>
</li>
</ul>
<blockquote>
<p>利用方式</p>
</blockquote>
<ul>
<li><p>过滤某个数字时，我们可以利用它的进制转换来绕过</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token number">042</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// 34</span>
<span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token number">0x1A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// 2</span>
<span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>数组绕过</p>
<blockquote>
<p>返回值<br>成功时返回 var 的 integer 值，失败时返回 0。空的 array 返回 0，非空的 array 返回 1。 </p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">!=</span>b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">==</span>b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
    <span class="token comment">//输入a[]=1和b[]=2绕过(此时两个不同但是都返回1)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>小数点绕过</p>
<blockquote>
<p>小数点后的数字会直接舍去</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// 42</span>
<span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token number">4.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// 4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>单引号字母绕过</p>
<blockquote>
<p>单引号传值的时候，它只识别字母前面的一部分</p>
<p>进行get传参时,默认加单引号</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token number">1e10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// 1410065408</span>
<span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'1e10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>仅在<strong>php5</strong>下可实现1e10&#x3D;1；<strong>php7</strong>下会转换成10的10次方</li>
<li>计算时1e10会自动转换为10的10次方</li>
</ul>
</li>
</ul>
<hr>
<h2 id="in-array-函数"><a href="#in-array-函数" class="headerlink" title="in_array()函数"></a>in_array()函数</h2><blockquote>
<p>判断一个值是否在数组中</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">in_array</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span><span class="token keyword type-declaration">array</span><span class="token punctuation">,</span>type<span class="token punctuation">)</span>
<span class="token comment">//value ：要搜索的值</span>
<span class="token comment">//array ：被搜索的数组</span>
<span class="token comment">//type ： 类型，true全等 ，false非全等(默认)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果没有设置第三个参数，就会进行自动转换(弱类型比较忽略后面的字符串)</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$n</span><span class="token operator">=</span><span class="token string double-quoted-string">"1.php"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">,</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<hr>
<h2 id="is-file-函数"><a href="#is-file-函数" class="headerlink" title="is_file()函数"></a>is_file()函数</h2><blockquote>
<p>检查指定的文件是否是常规的文件。</p>
<p>如果文件是常规的文件，该函数返回 TRUE。</p>
</blockquote>
<ul>
<li>可运用伪协议，不会将伪协议当作文件</li>
<li>目录溢出：该函数最多能处理330位字符串（大概？），超出后会认为不是一个文件</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;p
roc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;pro
c&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;
self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;se
lf&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<hr>
<h2 id="is-numeric-函数"><a href="#is-numeric-函数" class="headerlink" title="is_numeric()函数"></a>is_numeric()函数</h2><blockquote>
<p>检测变量是否为数字或数字字符串</p>
</blockquote>
<blockquote>
<p>PHP 4, PHP 5, PHP 7</p>
</blockquote>
<p>如果指定的变量是数字和数字字符串则返回 TRUE，否则返回 FALSE，注意<strong>浮点型</strong>返回 1，即 TRUE</p>
<ul>
<li><p>在数字前加上空格，也会被is_numeric函数认为是数字</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">\n<span class="token punctuation">,</span>\t<span class="token punctuation">,</span>\f<span class="token punctuation">,</span>\r<span class="token punctuation">,</span>\v<span class="token punctuation">,</span> <span class="token operator">.</span>均可绕过<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
<hr>
<h2 id="mt-srand函数-amp-伪随机数漏洞"><a href="#mt-srand函数-amp-伪随机数漏洞" class="headerlink" title="mt_srand函数&amp;伪随机数漏洞"></a>mt_srand函数&amp;伪随机数漏洞</h2><blockquote>
<p>播种 Mersenne Twister 随机数生成器</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">mt_srand</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><code>seed</code>：可选，规定播种值，设置之后即为伪随机</li>
</ul>
<p>伪随机存在可预测性：</p>
<p>知道种子后，可以确定输出伪随机数的序列<br>知道随机数序列，可以确定你的种子</p>
<p>可以使用工具php_mt_seed爆破seed：下载地址<a target="_blank" rel="noopener" href="http://www.openwall.com/php_mt_seed">www.openwall.com/php_mt_seed</a></p>
<p>用法：在php_mt_seed文件夹下执行命令</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span>
<span class="token function">time</span> ./php_mt_seed <span class="token number">123878781</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<hr>
<blockquote>
<p>$_SERVER 是一个包含了诸如头信息(header)、路径(path)、以及脚本位置(script locations)等等信息的数组</p>
</blockquote>
<h2 id="SERVER-‘argv’"><a href="#SERVER-‘argv’" class="headerlink" title="$_SERVER[‘argv’]"></a>$_SERVER[‘argv’]</h2><blockquote>
<p>传递给该脚本的参数，以数组方式传回里面的内容</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$a</span><span class="token operator">=</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'argv'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>这里分别测试一下传入参数<code>1</code>，<code>a=1&amp;b=1</code>，<code>a=1+b=1</code></p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20230804124857920.png" alt="image-20230804124857920"></p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20230804124935710.png" alt="image-20230804124935710"></p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20230804125002066.png" alt="image-20230804125002066"></p>
<p>从这里可以发现几个问题</p>
<ul>
<li><code>&amp;</code>无法分割参数，真正能分割参数的是<code>+</code></li>
<li>等号无法赋值，而是会直接被传进去当作参数</li>
</ul>
<h2 id="SERVER-‘QUERY-STRING’"><a href="#SERVER-‘QUERY-STRING’" class="headerlink" title="$_SERVER[‘QUERY_STRING’]"></a>$_SERVER[‘QUERY_STRING’]</h2><blockquote>
<p>查询字符串，一般用来返回get请求中<code>?</code>后面的内容</p>
</blockquote>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20231122113059278.png" alt="image-20231122113059278"></p>
<p>注意：这个函数匹配的是原始数据，就是没有url编码过的数据</p>
<p>所以当我们用url编码的时候，是可以绕过对<code>$_SERVER[&#39;QUERY_STRING&#39;]</code>中的值的匹配</p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20231122113835313.png" alt="image-20231122113835313"></p>
<hr>
<h2 id="gettext-函数"><a href="#gettext-函数" class="headerlink" title="gettext()函数"></a>gettext()函数</h2><blockquote>
<p>可以直接输出文本，需要php扩展目录下有php_gettext.dll</p>
</blockquote>
<p>拓展函数：</p>
<p><code>_()</code>&#x3D;&#x3D;gettext()</p>
<h2 id="get-defined-vars-函数"><a href="#get-defined-vars-函数" class="headerlink" title="get_defined_vars()函数"></a>get_defined_vars()函数</h2><blockquote>
<p>返回由所有已定义变量所组成的数组</p>
</blockquote>
<p>和<code>phpinfo()</code>一样是无参方法，可以直接被<code>call_user_func</code>调用</p>
<h2 id="class-exists-函数"><a href="#class-exists-函数" class="headerlink" title="class_exists()函数"></a>class_exists()函数</h2><blockquote>
<p>PHP中的内置函数，用于检查是否定义了给定的类</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">class_exists</span><span class="token punctuation">(</span> <span class="token keyword type-hint">string</span> <span class="token variable">$class_name</span><span class="token punctuation">,</span> <span class="token keyword type-hint">bool</span> <span class="token variable">$autoload</span> <span class="token operator">=</span> <span class="token constant boolean">TRUE</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>$class_name:它拥有需要检查其存在的类名</li>
<li>$autoload:它检查默认情况下是否调用<code>__autoload</code></li>
</ul>
<h3 id="autoload-函数"><a href="#autoload-函数" class="headerlink" title="__autoload()函数"></a>__autoload()函数</h3><blockquote>
<p>尝试加载未定义的类</p>
</blockquote>
<p>php版本 &lt;&#x3D; 5.3</p>
<p>通过定义这个函数来启用<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.oop5.autoload.php">类的自动加载</a></p>
<hr>
<h2 id="pathinfo函数"><a href="#pathinfo函数" class="headerlink" title="pathinfo函数"></a>pathinfo函数</h2><blockquote>
<p>返回文件路径的信息</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">pathinfo</span> <span class="token punctuation">(</span><span class="token variable">$path</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token class-name">PATHINFO_DIRNAME</span> <span class="token operator">|</span> <span class="token class-name">PATHINFO_BASENAME</span> <span class="token operator">|</span> <span class="token class-name">PATHINFO_EXTENSION</span> <span class="token operator">|</span> <span class="token class-name">PATHINFO_FILENAME</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>如果没有传入 <code>options</code> ，将会返回包括以下单元的数组array：</p>
<p>dirname：目录路径</p>
<p>basename：文件名</p>
<p>extension（如果有）：文件后缀名。注：当出现多个<code>.</code>时，结果为最后一个<code>.</code>后面的内容。可以利用这个特性实现对后缀名检测的绕过。如<code>/../../../../1.php</code>，还是可以检测出php</p>
<p>filename：不包含后缀的文件名</p>
<p>根据<code>/</code>获取文件名，根据<code>.</code>获取到文件后缀名，再将不包含后缀的文件名和文件后缀名进行拼接</p>
<p>测试：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$pathinfo_name</span><span class="token operator">=</span><span class="token function">pathinfo</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$pathinfo_name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们正常传入一个路径&#x2F;1.php</p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20231119204150725.png" alt="image-20231119204150725"></p>
<p>可以看到都被正常解析了</p>
<p>但是如果我们构造一个特殊的路径<code>1.php/.</code>呢？</p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20231119204410074.png" alt="image-20231119204410074"></p>
<p>可以看到此时后缀名和文件名都解析失败了</p>
<hr>
<h1 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h1><h2 id="md5"><a href="#md5" class="headerlink" title="md5"></a>md5</h2><blockquote>
<p>计算字符串的 MD5 散列值</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">md5</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token keyword type-hint">bool</span> <span class="token variable">$binary</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="等效值绕过"><a href="#等效值绕过" class="headerlink" title="等效值绕过"></a>等效值绕过</h3><p>弱类型比较：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>以 0e 开头的数字后面会被忽略（科学计数法）</p>
<p>即在进行弱比较时两边的结果均为<code>0</code></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token constant">QNKCDZO</span>
<span class="token number">240610708</span>
s878926199a
s155964671a
s1091221200a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<br>

<p>强类型比较：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>用MD值完全相同的字符来进行绕过</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"psycho%0A%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00W%ADZ%AF%3C%8A%13V%B5%96%18m%A5%EA2%81_%FB%D9%24%22%2F%8F%D4D%A27vX%B8%08%D7m%2C%E0%D4LR%D7%FBo%10t%19%02%82%7D%7B%2B%9Bt%05%FFl%AE%8DE%F4%1F%84%3C%AE%01%0F%9B%12%D4%81%A5J%F9H%0FyE%2A%DC%2B%B1%B4%0F%DEcC%40%DA29%8B%C3%00%7F%8B_h%C6%D3%8Bd8%AF%85%7C%14w%06%C2%3AC%BC%0C%1B%FD%BB%98%CE%16%CE%B7%B6%3A%F3%99%B59%F9%FF%C2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"psycho%0A%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00W%ADZ%AF%3C%8A%13V%B5%96%18m%A5%EA2%81_%FB%D9%A4%22%2F%8F%D4D%A27vX%B8%08%D7m%2C%E0%D4LR%D7%FBo%10t%19%02%02%7E%7B%2B%9Bt%05%FFl%AE%8DE%F4%1F%04%3C%AE%01%0F%9B%12%D4%81%A5J%F9H%0FyE%2A%DC%2B%B1%B4%0F%DEc%C3%40%DA29%8B%C3%00%7F%8B_h%C6%D3%8Bd8%AF%85%7C%14w%06%C2%3AC%3C%0C%1B%FD%BB%98%CE%16%CE%B7%B6%3A%F3%9959%F9%FF%C2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>因为客户端传参数时会过一层 url 解码，所以直接传整个 url 编码的 payload 即可</p>
<br>

<p>数组绕过：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"b"</span> <span class="token operator">=></span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"a"</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>原理是<strong>md5等函数不能处理数组，导致函数返回Null</strong>。而 Null 是等于 Null 的，导致了绕过。</p>
<br>

<p>特殊比较：</p>
<ul>
<li><p>自身和 md5 后都是 0e 开头：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token string double-quoted-string">"0e215962017"</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"0e215962017"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>两次 md5 后还是 0e 开头：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token string double-quoted-string">"0e1138100474"</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"0e1138100474"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
<br>

<p>爆破固定前缀：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> hashlib

<span class="token keyword">def</span> <span class="token function">md5_hash</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span>text<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>

target_prefix <span class="token operator">=</span> <span class="token string">"666"</span>
found <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 将当前数字作为字符串进行MD5哈希两次</span>
    text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    hash1 <span class="token operator">=</span> md5_hash<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    hash2 <span class="token operator">=</span> md5_hash<span class="token punctuation">(</span>hash1<span class="token punctuation">)</span>

    <span class="token comment"># 检查哈希结果的开头是否为目标前缀</span>
    <span class="token keyword">if</span> hash2<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span>target_prefix<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"找到匹配的字符串："</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
        found <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">break</span>

<span class="token keyword">if</span> <span class="token keyword">not</span> found<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未找到匹配的字符串。"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>爆破 0e 开头：以上面那个两次 md5 和原始字符串比较为例</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> hashlib
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">def</span> <span class="token function">md5_encrypt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span>value<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">find_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> trange<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">100000000000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        value <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"0e</span><span class="token interpolation"><span class="token punctuation">&#123;</span>i<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span>
        md5_1 <span class="token operator">=</span> md5_encrypt<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        md5_2 <span class="token operator">=</span> md5_encrypt<span class="token punctuation">(</span>md5_1<span class="token punctuation">)</span>
        <span class="token keyword">if</span> md5_2<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">"0e"</span><span class="token punctuation">)</span> <span class="token keyword">and</span> md5_2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            values<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> md5_1<span class="token punctuation">,</span> md5_2<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> values
result <span class="token operator">=</span> find_values<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>有需要的话自改</p>
<hr>
<h2 id="md4"><a href="#md4" class="headerlink" title="md4"></a>md4</h2><p>来自<a target="_blank" rel="noopener" href="https://www.cnblogs.com/N-schema/p/13577446.html">强网杯2020 Funhash</a></p>
<p>弱比较：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hash1'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'md4'</span><span class="token punctuation">,</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hash1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>hash1=0e251288019</code></p>
<p>爆破出的另一个结果：<code>0e001233333333333334557778889</code></p>
<hr>
<h2 id="sha1"><a href="#sha1" class="headerlink" title="sha1"></a>sha1</h2><blockquote>
<p>计算字符串的 sha1 散列值</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token keyword type-hint">bool</span> <span class="token variable">$binary</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>弱类型比较：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sha1<span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token operator">==</span> sha1<span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>0e开头：</p>
<pre class="line-numbers language-none"><code class="language-none">aaO8zKZF
aaK1STfY<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<br>

<p>强类型绕过：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"%25PDF-1.3%0A%25%E2%E3%CF%D3%0A%0A%0A1%200%20obj%0A%3C%3C/Width%202%200%20R/Height%203%200%20R/Type%204%200%20R/Subtype%205%200%20R/Filter%206%200%20R/ColorSpace%207%200%20R/Length%208%200%20R/BitsPerComponent%208%3E%3E%0Astream%0A%FF%D8%FF%FE%00%24SHA-1%20is%20dead%21%21%21%21%21%85/%EC%09%239u%9C9%B1%A1%C6%3CL%97%E1%FF%FE%01%7FF%DC%93%A6%B6%7E%01%3B%02%9A%AA%1D%B2V%0BE%CAg%D6%88%C7%F8K%8CLy%1F%E0%2B%3D%F6%14%F8m%B1i%09%01%C5kE%C1S%0A%FE%DF%B7%608%E9rr/%E7%ADr%8F%0EI%04%E0F%C20W%0F%E9%D4%13%98%AB%E1.%F5%BC%94%2B%E35B%A4%80-%98%B5%D7%0F%2A3.%C3%7F%AC5%14%E7M%DC%0F%2C%C1%A8t%CD%0Cx0Z%21Vda0%97%89%60k%D0%BF%3F%98%CD%A8%04F%29%A1"</span><span class="token punctuation">;</span>
<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"%25PDF-1.3%0A%25%E2%E3%CF%D3%0A%0A%0A1%200%20obj%0A%3C%3C/Width%202%200%20R/Height%203%200%20R/Type%204%200%20R/Subtype%205%200%20R/Filter%206%200%20R/ColorSpace%207%200%20R/Length%208%200%20R/BitsPerComponent%208%3E%3E%0Astream%0A%FF%D8%FF%FE%00%24SHA-1%20is%20dead%21%21%21%21%21%85/%EC%09%239u%9C9%B1%A1%C6%3CL%97%E1%FF%FE%01sF%DC%91f%B6%7E%11%8F%02%9A%B6%21%B2V%0F%F9%CAg%CC%A8%C7%F8%5B%A8Ly%03%0C%2B%3D%E2%18%F8m%B3%A9%09%01%D5%DFE%C1O%26%FE%DF%B3%DC8%E9j%C2/%E7%BDr%8F%0EE%BC%E0F%D2%3CW%0F%EB%14%13%98%BBU.%F5%A0%A8%2B%E31%FE%A4%807%B8%B5%D7%1F%0E3.%DF%93%AC5%00%EBM%DC%0D%EC%C1%A8dy%0Cx%2Cv%21V%60%DD0%97%91%D0k%D0%AF%3F%98%CD%A4%BCF%29%B1"</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">sha1</span><span class="token punctuation">(</span><span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<br>

<p>数组绕过：和 md5 一样</p>
<hr>
<h2 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h2><blockquote>
<p>返回字符串的一部分</p>
</blockquote>
<p>  如果 参数<code>start </code>是负数且 <code>length</code> 小于或等于 <code>start</code>，则 <code>length</code> 为 0。</p>
  <pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">substr</span><span class="token punctuation">(</span><span class="token keyword type-declaration">string</span><span class="token punctuation">,</span>start<span class="token punctuation">,</span>length<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><p><code>start</code>:</p>
<p>正数 - 在字符串的指定位置开始</p>
<p>负数 - 在从字符串结尾的指定位置开始</p>
<p>0 - 在字符串中的第一个字符处开始</p>
</li>
<li><p><code>length</code>:</p>
<p>正数 - 从<code>start</code>参数所在的位置向后返回字符个数</p>
<p>负数 - 从字符串末端指定位置向前返回字符个数</p>
</li>
</ul>
<p>如果提取字符串失败则返回 FALSE，或者返回一个空字符串，所以在某些情况下可以利用这个特性<strong>传入数组</strong>实现绕过</p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20231122111544451.png" alt="image-20231122111544451"></p>
<h3 id="重复取值突破substr限制"><a href="#重复取值突破substr限制" class="headerlink" title="重复取值突破substr限制"></a>重复取值突破substr限制</h3><blockquote>
<p>ctfshow web133</p>
</blockquote>
<p>linux 环境下</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$F</span><span class="token operator">=</span><span class="token string double-quoted-string">"`\$F`; ls"</span><span class="token punctuation">;</span>
<span class="token variable">$a</span><span class="token operator">=</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$F</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// eval("`$F`; ")</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>eval 内的php代码：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token string backtick-quoted-string">`$F`</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>取变量 $F</p>
<p>此时 eval 执行的 linux 命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable"><span class="token variable">`</span>$F<span class="token variable">`</span></span><span class="token punctuation">;</span> <span class="token function">ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<hr>
<h2 id="strpos"><a href="#strpos" class="headerlink" title="strpos"></a>strpos</h2><blockquote>
<p>查找字符串首次出现的位置</p>
</blockquote>
<ul>
<li>开头添加<code>+</code>或<code>%0a</code>使返回数改变</li>
</ul>
<p><code>strpos(&#39;01234&#39;, 0)</code> 返回的结果是 0 对应的索引 0, 也就是 false</p>
<p>如果是 <code>!strpos()</code> 这种则会返回 true</p>
<p>代码使用了 <code>if(!strpos($str, 0))</code> 对八进制进行过滤, 可以在字符串开头加空格绕过</p>
<p>strpos() 遇到数组返回 null</p>
<p><code>strrpos()</code>、<code>stripos()</code>、<code>strripos()</code> 同理</p>
<hr>
<h2 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h2><blockquote>
<p>移除字符串两侧的空白字符或其他预定义字符</p>
</blockquote>
<blockquote>
<p><code>ltrim() </code>移除字符串左侧的空白字符或其他预定义字符。<code>rtrim()</code>移除字符串右侧的空白字符或其他预定义字符。</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">trim</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token keyword type-hint">string</span> <span class="token variable">$characters</span> <span class="token operator">=</span> <span class="token string double-quoted-string">" \n\r\t\v\x00"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>执行成功时返回删除了 string 字符串首部和尾部空格的字符串，发生错误时返回空字符串（&quot;&quot;）。如果任何参数的值为 NULL , trim() 函数返回 NULL</p>
<ul>
<li>trim() 函数过滤空格以及 <code>\n(%0a) \r(%0d) \t(%09) \v(%0b) \0(%00)</code>，但不会过滤换页符<code>\f (%0c)</code></li>
</ul>
<hr>
<h2 id="htmlspecialchars"><a href="#htmlspecialchars" class="headerlink" title="htmlspecialchars"></a>htmlspecialchars</h2><blockquote>
<p>将特殊字符转换为 HTML 实体</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.php.net/htmlspecialchars">https://www.php.net/htmlspecialchars</a></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">htmlspecialchars</span><span class="token punctuation">(</span>
    <span class="token keyword type-hint">string</span> <span class="token variable">$string</span><span class="token punctuation">,</span>
    <span class="token keyword type-hint">int</span> <span class="token variable">$flags</span> <span class="token operator">=</span> <span class="token class-name">ENT_QUOTES</span> <span class="token operator">|</span> <span class="token class-name">ENT_SUBSTITUTE</span> <span class="token operator">|</span> <span class="token class-name">ENT_HTML401</span><span class="token punctuation">,</span>
    <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$encoding</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span>
    <span class="token keyword type-hint">bool</span> <span class="token variable">$double_encode</span> <span class="token operator">=</span> <span class="token constant boolean">true</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>转义：</p>
<pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">&amp; (&amp; 符号)  ===============  &amp;amp;
" (双引号)  ===============  &amp;quot;
' (单引号)  ===============  &amp;apos;
&lt; (小于号)  ===============  &amp;lt;
> (大于号)  ===============  &amp;gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<hr>
<h1 id="正则特性"><a href="#正则特性" class="headerlink" title="正则特性"></a>正则特性</h1><h2 id="preg-match"><a href="#preg-match" class="headerlink" title="preg_match()"></a>preg_match()</h2><blockquote>
<p>判断输入的值是否存在指定字符</p>
</blockquote>
<ul>
<li><p>正则中的<code>$</code>：匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 <code>$</code> 也匹配 ‘\n’ 或 ‘\r’。要匹配 <code>$</code> 字符本身，请使用 <code>$</code>。</p>
</li>
<li><p>正则中的<code>.</code>：匹配除<strong>换行符</strong>外的任意一个字符</p>
</li>
<li><p><code>*</code>：匹配0次、或1次、或多次其前面的字符</p>
</li>
<li><p><code>+</code>：匹配1次或多次前面的字符</p>
</li>
<li><p><code>?</code>：匹配0次或1次其前面的字符</p>
</li>
<li><p>模式修正符：</p>
<ul>
<li>i：在和模式进行匹配时不区分大小写</li>
<li>m：多行匹配</li>
<li>s：匹配所有的字符，包括换行符</li>
<li>U：禁止贪婪匹配</li>
</ul>
</li>
<li><p>漏洞：<strong>无法处理数组</strong></p>
</li>
</ul>
<h2 id="常规绕过"><a href="#常规绕过" class="headerlink" title="常规绕过"></a>常规绕过</h2><p>参考<a href="https://c1oudfl0w0.github.io/blog/2023/03/15/RCE%E6%80%BB%E7%BB%93/#%E7%BB%95%E8%BF%87%E8%A2%AB%E8%BF%87%E6%BB%A4%E7%9A%84%E5%AD%97%E7%AC%A6">RCE部分绕过过滤的关键字</a></p>
<h2 id="无视通配符"><a href="#无视通配符" class="headerlink" title="无视通配符"></a>无视通配符</h2><blockquote>
<p>ctfshow web130</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/.+?ctfshow/is'</span><span class="token punctuation">,</span> <span class="token variable">$f</span><span class="token punctuation">)</span>
<span class="token operator">?</span>作为通配符可以匹配至少一个任意字符，但是如果没有这个字符则不匹配，因此ctfshow可以直接绕过<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="溢出绕过-x2F-PCRE回溯"><a href="#溢出绕过-x2F-PCRE回溯" class="headerlink" title="溢出绕过&#x2F;PCRE回溯"></a>溢出绕过&#x2F;PCRE回溯</h2><blockquote>
<p>ctfshow web130、131</p>
</blockquote>
<p>可以看p神的文章：<a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/use-pcre-backtrack-limit-to-bypass-restrict.html">https://www.leavesongs.com/PENETRATION/use-pcre-backtrack-limit-to-bypass-restrict.html</a></p>
<p>PHP为了防止DOS攻击。给pcre设置了一个回溯上限。默认是100万</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">ini_get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'pcre.backtrack_limit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// string(7) "1000000"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>当待匹配的字符串超过100W，函数就会返回False。也就没未匹配到字符。</p>
<p>所以当正则表达式的限制与某些条件冲突时，我们可以利用<code>str_repeat</code>函数进行重复匹配实现溢出绕过</p>
<p>因为太长了所以直接用python脚本发送请求</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">"http://ca01df51-1030-4af4-a39d-ce3852f2ae35.challenge.ctf.show/"</span>
data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'f'</span><span class="token punctuation">:</span> <span class="token string">'very'</span> <span class="token operator">*</span> <span class="token number">250000</span> <span class="token operator">+</span> <span class="token string">'36Dctfshow'</span><span class="token punctuation">&#125;</span>
res <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="0a换行绕过"><a href="#0a换行绕过" class="headerlink" title="%0a换行绕过"></a>%0a换行绕过</h2><ul>
<li><code>\n</code>换行符即<code>%0a</code></li>
</ul>
<p>demo1：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^.flag/i'</span><span class="token punctuation">,</span> <span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'waf'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'OK~'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>上面也说过了，正则中的<code>.</code>会匹配除<strong>换行符</strong>外的任意一个字符，那当我们用<code>%0a</code>换行的时候就不会被正则识别到，从而能实现绕过</p>
<p>demo2：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^flag$/'</span><span class="token punctuation">,</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string single-quoted-string">'flag'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>这个正则匹配是以flag开头和结尾的，即只匹配flag这个字符串</p>
<p>而非多行模式<code>m</code>下，<code>$</code>会忽略在结尾的%0a，所以传入<code>flag%0a</code>即可绕过</p>
<h2 id="命名空间绕过"><a href="#命名空间绕过" class="headerlink" title="命名空间绕过"></a>命名空间绕过</h2><blockquote>
<p>ctfshow web147</p>
</blockquote>
<p>对于以下正则</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span>_<span class="token punctuation">]</span><span class="token operator">*</span>$<span class="token operator">/</span>isD<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>因为匹配的是参数的开头和结尾，我们想调用函数的话就需要用到<strong>php的默认命名空间</strong><code>\</code>，所有原生函数和类都在这个命名空间中</p>
<p>普通调用一个函数，如果直接写函数名<code>function_name()</code>调用，调用的时候其实相当于写了一个<strong>相对路径</strong>； 而如果写<code>\function_name()</code>这样调用函数，则其实是写了一个<strong>绝对路径</strong></p>
<h2 id="数组绕过"><a href="#数组绕过" class="headerlink" title="数组绕过"></a>数组绕过</h2><p>上面介绍正则匹配函数的时候我们说过这个函数无法处理数组</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$_POST</span> <span class="token keyword">as</span> <span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/[a-zA-Z0-9]/"</span><span class="token punctuation">,</span><span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"fxxk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>因此如果我们需要传入POST参数，此时可以用数组实现绕过</p>
<hr>
<h2 id="ereg-函数"><a href="#ereg-函数" class="headerlink" title="ereg()函数"></a>ereg()函数</h2><blockquote>
<p>用指定的模式搜索一个字符串中指定的字符串,如果匹配成功返回true,否则,则返回false</p>
<p>搜索字母的字符是大小写敏感的</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword type-declaration">int</span> <span class="token function">ereg</span><span class="token punctuation">(</span><span class="token keyword type-declaration">string</span> pattern<span class="token punctuation">,</span> <span class="token keyword type-declaration">string</span> originalstring<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token keyword type-declaration">array</span> regs<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

可选的输入参数regs包含由正则表达式中的括号组成的所有匹配表达式的数组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>漏洞</strong>：<ul>
<li>NULL截断：使用<code>%00</code>截断前后语句的正则匹配</li>
<li>只能处理字符串，遇到数组做参数返回NULL</li>
</ul>
</li>
</ul>
<hr>
<h2 id="preg-replace和正则e模式"><a href="#preg-replace和正则e模式" class="headerlink" title="preg_replace和正则e模式"></a>preg_replace和正则e模式</h2><p>见<a href="/blog/2023/10/03/SHCTF2023/#preg_replace%E5%92%8C%E6%AD%A3%E5%88%99e%E6%A8%A1%E5%BC%8F">SHCTF2023 Week1</a></p>
<hr>
<h1 id="路径绕过"><a href="#路径绕过" class="headerlink" title="路径绕过"></a>路径绕过</h1><blockquote>
<p>原型</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'u'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'u'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'flag.php'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'u'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>只匹配<code>flag.php</code>,所以可以加入当前路径</p>
<pre class="line-numbers language-none"><code class="language-none">.&#x2F;flag.php
var&#x2F;www&#x2F;html&#x2F;flag.php<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>目录穿越</p>
<p>读取文件时可以利用以下语句访问</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>etc/passwd
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www/html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>注：若路径中有不存在的文件夹会直接跳过此段路径查看</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>aaa/<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www/html == 上面那段语句<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h1 id="数字和运算符一起执行命令"><a href="#数字和运算符一起执行命令" class="headerlink" title="数字和运算符一起执行命令"></a>数字和运算符一起执行命令</h1><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token number">1</span><span class="token operator">+</span><span class="token function">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span>
<span class="token number">1</span><span class="token operator">*</span><span class="token function">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1</span><span class="token operator">|</span><span class="token class-name">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>这样可以显示phpinfo.php</p>
<p>同理存在eval的情况下可以执行<code>system()</code></p>
<h1 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h1><blockquote>
<p><code>&amp;&amp;</code> &gt; <code>||</code> &gt; <code>=</code> &gt; <code>and</code> &gt; <code>or</code></p>
</blockquote>
<h2 id="and与-x3D"><a href="#and与-x3D" class="headerlink" title="and与&#x3D;"></a>and与&#x3D;</h2><p>赋值语句中出现<code>=</code>和多个<code>and</code>时只会赋第一个值</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$v0</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>&#x3D;的运算符比and高<br>对于v0的值只需要看v1，而v2、v3是干扰</p>
<h2 id="amp-amp-与"><a href="#amp-amp-与" class="headerlink" title="&amp;&amp;与||"></a>&amp;&amp;与||</h2><blockquote>
<p>ctfshow web132</p>
</blockquote>
<p>对于</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$code</span> <span class="token operator">===</span> <span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0x36D</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$password</span> <span class="token operator">===</span> <span class="token variable">$flag</span> <span class="token operator">||</span> <span class="token variable">$username</span> <span class="token operator">===</span><span class="token string double-quoted-string">"admin"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>由于优先级的原因，前两个条件会先进行一次&amp;&amp;运算，结果通常为0，然后与最后一个条件进行||运算，只要让<code>$username ===&quot;admin&quot;</code>，就能变成<code>0||1</code>即1</p>
<hr>
<h1 id="内置类"><a href="#内置类" class="headerlink" title="内置类"></a>内置类</h1><blockquote>
<p>题目有调用类语句时可用</p>
<p>如:<code>echo $v1($v2);</code></p>
</blockquote>
<h2 id="php原生类"><a href="#php原生类" class="headerlink" title="php原生类"></a>php原生类</h2><p>直接看<a href="/blog/2023/04/30/PHP%E5%8E%9F%E7%94%9F%E7%B1%BB/">另一篇博客</a></p>
<h3 id="反射类ReflectionClass"><a href="#反射类ReflectionClass" class="headerlink" title="反射类ReflectionClass"></a>反射类ReflectionClass</h3><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/raoxiaoya/article/details/92797765">https://blog.csdn.net/raoxiaoya/article/details/92797765</a></p>
<blockquote>
<p>通过<strong>ReflectionClass</strong>，我们可以得到相关类的所有信息，接下来把类名传递即可</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">A</span><span class="token punctuation">&#123;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$flag</span><span class="token operator">=</span><span class="token string double-quoted-string">"flag&#123;123123123&#125;"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span>  <span class="token constant">PI</span><span class="token operator">=</span><span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"hello&lt;/br>"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token variable">$a</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ReflectionClass</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//实例化</span>
 
 
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token operator">-></span><span class="token function">getConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  获取一组常量
输出
 <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">"PI"</span><span class="token punctuation">]</span><span class="token operator">=></span>
  <span class="token keyword type-declaration">float</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
 
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token operator">-></span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    获取类名
输出
<span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"A"</span>
 
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token operator">-></span><span class="token function">getStaticProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 获取静态属性
输出
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">"flag"</span><span class="token punctuation">]</span><span class="token operator">=></span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"flag&#123;123123123&#125;"</span>
<span class="token punctuation">&#125;</span>
 
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token operator">-></span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 获取类中的方法
输出
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>
  <span class="token keyword type-declaration">object</span><span class="token punctuation">(</span>ReflectionMethod<span class="token punctuation">)</span><span class="token comment">#2 (2) &#123;</span>
    <span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">]</span><span class="token operator">=></span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"hello"</span>
    <span class="token punctuation">[</span><span class="token string double-quoted-string">"class"</span><span class="token punctuation">]</span><span class="token operator">=></span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"A"</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<hr>
<h1 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h1><h2 id="十六进制"><a href="#十六进制" class="headerlink" title="十六进制"></a>十六进制</h2><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$v4</span> <span class="token operator">=</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$v4</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$s</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">,</span><span class="token variable">$s</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token variable">$str</span><span class="token punctuation">;</span>
    <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>v1传入hex2bin函数</li>
<li>v2传入base64后的16进制ascll码</li>
<li>v3传入php伪协议写入文件</li>
</ul>
<h2 id="url编码"><a href="#url编码" class="headerlink" title="url编码"></a>url编码</h2><h2 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h2><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">49</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<hr>
<h1 id="数组绕过-1"><a href="#数组绕过-1" class="headerlink" title="数组绕过"></a>数组绕过</h1><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">md5</span><span class="token punctuation">(</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">null</span>
<span class="token function">sha1</span><span class="token punctuation">(</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">null</span>
<span class="token function">ereg</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">null</span>
<span class="token function">preg_match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant boolean">false</span>
<span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"abc"</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">null</span>
<span class="token function">strpos</span><span class="token punctuation">(</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"abc"</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">null</span>
<span class="token function">strlen</span><span class="token punctuation">(</span><span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">null</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>而<code>null/false == 0</code></p>
<hr>
<h1 id="变量覆盖"><a href="#变量覆盖" class="headerlink" title="变量覆盖"></a>变量覆盖</h1><ul>
<li>post传入的参数并不能实现变量交换</li>
</ul>
<blockquote>
<p>用我们自定义的参数值替换程序原有的变量值</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">$$ 
<span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数
<span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数
<span class="token function">import_request_variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id=""><a href="#" class="headerlink" title="$$"></a>$$</h2><blockquote>
<p>将之前定义的变量的值重新定义新的变量</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$a</span><span class="token operator">=</span><span class="token class-name type-declaration">b</span>
<span class="token variable">$b</span><span class="token operator">=</span><span class="token class-name type-declaration">c</span>

<span class="token variable">$$a</span> <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">$b</span> <span class="token operator">=</span> <span class="token class-name type-declaration">c</span>
    
<span class="token variable">$hell</span><span class="token operator">=</span><span class="token string double-quoted-string">"abc"</span><span class="token punctuation">;</span>
<span class="token variable">$$hell</span><span class="token operator">=</span><span class="token string double-quoted-string">"def"</span><span class="token punctuation">;</span>等同于<span class="token variable">$abc</span><span class="token operator">=</span><span class="token string double-quoted-string">"def"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>$GLOBALS</p>
<blockquote>
<p>返回全局作用域中可用的全部变量</p>
</blockquote>
<p>可在过滤相关命令执行函数情况下使用</p>
</li>
</ul>
<h2 id="extract-函数"><a href="#extract-函数" class="headerlink" title="extract()函数"></a>extract()函数</h2><blockquote>
<p>将数组中的变量导入到当前的符号表</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">extract</span><span class="token punctuation">(</span><span class="token keyword type-declaration">array</span><span class="token punctuation">,</span>extract_rules<span class="token punctuation">,</span>prefix<span class="token punctuation">)</span> 
    
<span class="token comment">//array 必需的，规定要使用的数组</span>
<span class="token comment">//extract_rules 可有可无，如果为空，则默认为EXTR_OVERWRITE</span>
<span class="token comment">//prefix可选。如果 extract_rules 参数的值是 EXTR_PREFIX_SAME、EXTR_PREFIX_ALL、 EXTR_PREFIX_INVALID 或 EXTR_PREFIX_IF_EXISTS，则 prefix 是必需的。该参数规定了前缀。前缀和数组键名之间会自动加上一个下划线。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="parse-str-函数"><a href="#parse-str-函数" class="headerlink" title="parse_str()函数"></a>parse_str()函数</h2><blockquote>
<p>把查询字符串解析到变量中</p>
<p>PHP4+</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token keyword type-declaration">string</span><span class="token punctuation">,</span><span class="token keyword type-declaration">array</span><span class="token punctuation">)</span> 
    
没有返回值
<span class="token comment">//string 	必需。规定要解析的字符串。</span>
<span class="token comment">//array 	可选。规定存储变量的数组名称。该参数指示变量存储到数组中。</span>
<span class="token comment">//          如果未设置 array 参数，由该函数设置的变量将覆盖已存在的同名变量。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注释：</strong>如果未设置 array 参数，由该函数设置的变量将覆盖已存在的同名变量。</p>
<p><strong>注释：</strong>php.ini 文件中的 magic_quotes_gpc 设置影响该函数的输出。如果已启用，那么在 parse_str() 解析之前，变量会被 addslashes() 转换。</p>
<blockquote>
<p>例</p>
</blockquote>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"name=Peter&amp;age=43"</span><span class="token punctuation">,</span><span class="token variable">$myArray</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$myArray</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span>
    
    输出
    Array ( [name] => Peter [age] => 43 ) <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="foreach-函数"><a href="#foreach-函数" class="headerlink" title="foreach()函数"></a>foreach()函数</h2><p><a href="https://c1oudfl0w0.github.io/blog/2023/04/25/%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96%E7%9A%84%E4%B8%80%E6%AC%A1%E6%8E%A2%E7%B4%A2/">参考我的另一篇博客</a></p>
<h2 id="array-merge-函数"><a href="#array-merge-函数" class="headerlink" title="array_merge()函数"></a>array_merge()函数</h2><p>参考<a href="https://c1oudfl0w0.github.io/blog/2023/10/16/NSSCTF-web-%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%951/#array_merge%E5%87%BD%E6%95%B0">[GFCTF 2021]Baby_Web</a></p>
<h1 id="GET，-POST，-COOKIE"><a href="#GET，-POST，-COOKIE" class="headerlink" title="$_GET，$_POST，$_COOKIE"></a>$_GET，$_POST，$_COOKIE</h1><blockquote>
<p>ctfshow web134</p>
</blockquote>
<p>php中传参的主要代码如下</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'key'</span><span class="token punctuation">]</span>
<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'key'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>但是像<code>_GET</code>，<code>_POST</code>，<code>_COOKIE</code>这种超全局变量本身也是参数</p>
<p>所以我们可以直接对其进行传参，如<code>?_GET=flag</code>，此时参数内部为：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token punctuation">[</span><span class="token string double-quoted-string">"_GET"</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"flag"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>也可以传入数组形式的参数，如<code>?_POST[a]=1&amp;_POST[b]=12</code>，此时参数内部为：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token punctuation">[</span><span class="token string double-quoted-string">"_GET"</span><span class="token punctuation">]</span><span class="token operator">=></span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">[</span><span class="token string double-quoted-string">"_POST"</span><span class="token punctuation">]</span><span class="token operator">=></span>
        <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token punctuation">[</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">]</span><span class="token operator">=></span>
            <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"1"</span>
            <span class="token punctuation">[</span><span class="token string double-quoted-string">"b"</span><span class="token punctuation">]</span><span class="token operator">=></span>
            <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"12"</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">[</span><span class="token string double-quoted-string">"_POST"</span><span class="token punctuation">]</span><span class="token operator">=></span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">[</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">]</span><span class="token operator">=></span>
        <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"1"</span>
        <span class="token punctuation">[</span><span class="token string double-quoted-string">"b"</span><span class="token punctuation">]</span><span class="token operator">=></span>
        <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"12"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="REQUEST"><a href="#REQUEST" class="headerlink" title="$_REQUEST"></a>$_REQUEST</h1><p>当 GET 和 POST 有相同的变量时，优先匹配 POST 的变量</p>
<p><img src="/blog/2023/03/15/PHP%E7%89%B9%E6%80%A7/image-20231122115213938.png" alt="image-20231122115213938"></p>
<hr>
<h1 id="非法传参"><a href="#非法传参" class="headerlink" title="非法传参"></a>非法传参</h1><blockquote>
<p>当变量名中出现点和空格时，变量名中的<code>点</code>和<code>空格</code>被转换成下划线</p>
</blockquote>
<ul>
<li><p>版本：php &lt; 8</p>
</li>
<li><p>在变量解析中，php会把请求参数中的非法字符转为下划线</p>
</li>
<li><p>如果参数中出现中括号<code>[</code>，中括号会被转换成下划线<code>_</code>，但是会出现转换错误导致接下来如果该参数名中还有<code>非法字符</code>并不会继续转换成下划线<code>_</code>，也就是说如果中括号<code>[</code>出现在前面，那么中括号<code>[</code>还是会被转换成下划线<code>_</code>，但是因为出错导致接下来的非法字符并不会被转换成下划线<code>_</code></p>
</li>
</ul>

    </div>
    
    
    
    
    
    
    
</div>

            </div>
        </transition>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/blog/js/main.js"></script>
    
    




    
    

<div id="vcomments"></div>

<script src="/blog/js/lib/valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: 'U9mZLKunkRUTcBFthjXPjnZE-9Nh9j0Va',
        app_key: 'SzWOnY0PWLGNuL6jW8TZYc7j',
        visitor: 'true',
        placeholder: '写点什么吧(●ˇ∀ˇ●)',
        serverURLs: 'https://u9mzlkun.lc-cn-n1-shared.com',
    });
</script>

    <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 雲流のLowest World
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;C1oudfL0w0
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/argvchs/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

<script src="/blog/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/blog/live2dw/assets/z16.model.json"},"display":{"position":"left","width":150,"height":290},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>